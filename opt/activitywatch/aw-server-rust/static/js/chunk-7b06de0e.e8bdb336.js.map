{"version":3,"sources":["webpack:///./src/visualizations/Summary.vue?f6f4","webpack:///./src/visualizations/Summary.vue?881f","webpack:///./src/visualizations/summary.js","webpack:///./node_modules/vue-awesome/icons/angle-double-down.js","webpack:///src/visualizations/Summary.vue","webpack:///./src/visualizations/Summary.vue?812a","webpack:///./src/visualizations/Summary.vue?8d85"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","fields","length","with_limit","limit_","attrs","on","$event","_v","_e","staticRenderFns","d3","require","Color","_","create","container","innerHTML","svg","select","append","attr","set_status","msg","svg_elem","querySelector","text","update","apps","filter","app","undefined","duration","curr_y","longest_duration","each","i","width","barHeight","textSize","baseappcolor","getColorFromString","colorKey","name","appcolor","lighten","hex","hovercolor","darken","eg","style","hovertext","seconds_to_duration","updateSummedEvents","summedEvents","titleKeyFunc","hoverKeyFunc","colorKeyFunc","map","e","Icon","register","height","paths","d","props","Array","namefunc","Function","hoverfunc","type","default","colorfunc","limit","Number","Boolean","data","watch","mounted","summary","el","methods","component"],"mappings":"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","file":"js/chunk-7b06de0e.e8bdb336.js","sourcesContent":["import mod from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Summary.vue?vue&type=style&index=0&id=6885be95&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Summary.vue?vue&type=style&index=0&id=6885be95&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"aw-summary-container\"}),(_vm.fields && _vm.fields.length > 0 && _vm.with_limit && _vm.fields.length > _vm.limit_)?_c('b-button',{staticClass:\"mt-1\",attrs:{\"size\":\"sm\",\"variant\":\"outline-secondary\"},on:{\"click\":function($event){_vm.limit_ += 5}}},[_c('icon',{attrs:{\"name\":\"angle-double-down\"}}),_vm._v(\"Show more\")],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","'use strict';\n\nconst d3 = require('d3');\nconst Color = require('color');\nconst _ = require('lodash');\n\nimport { getColorFromString } from '../util/color.js';\n\nimport { seconds_to_duration } from '../util/time.js';\n\nfunction create(container) {\n  // Clear element\n  container.innerHTML = '';\n\n  // Create svg canvas\n  const svg = d3.select(container).append('svg');\n  svg.attr('width', '100%').attr('height', '100px').attr('class', 'appsummary');\n}\n\nfunction set_status(container, msg) {\n  // Select svg canvas\n  const svg_elem = container.querySelector('.appsummary');\n  const svg = d3.select(svg_elem);\n  svg_elem.innerHTML = '';\n\n  svg\n    .append('text')\n    .attr('x', '0px')\n    .attr('y', '25px')\n    .text(msg)\n    .attr('font-family', 'sans-serif')\n    .attr('font-size', '25px')\n    .attr('fill', 'black');\n}\n\nfunction update(container, apps) {\n  // No apps, sets status to \"No data\"\n  if (apps.length <= 0) {\n    set_status(container, 'No data');\n    return container;\n  }\n\n  const svg_elem = container.querySelector('.appsummary');\n  svg_elem.innerHTML = '';\n  const svg = d3.select(svg_elem);\n\n  // Remove apps without a duration from list\n  apps = apps.filter(function (app) {\n    return app.duration !== undefined;\n  });\n\n  let curr_y = 0;\n  const longest_duration = apps[0].duration;\n  _.each(apps, function (app, i) {\n    // TODO: Expand on click and list titles\n\n    // Variables\n    const width = (app.duration / longest_duration) * 100 + '%';\n    const barHeight = 50;\n    const textSize = 15;\n    const baseappcolor = getColorFromString(app.colorKey || app.name);\n    const appcolor = Color(baseappcolor).lighten(0.1).hex();\n    const hovercolor = Color(baseappcolor).darken(0.1).hex();\n\n    // The group representing an application in the barchart\n    const eg = svg.append('g');\n    eg.attr('id', 'summary_app_' + i)\n      .on('mouseover', function () {\n        eg.select('rect').style('fill', hovercolor);\n      })\n      .on('mouseout', function () {\n        eg.select('rect').style('fill', appcolor);\n      });\n\n    eg.append('title').text(app.hovertext + '\\n' + seconds_to_duration(app.duration));\n\n    // Color box background\n    eg.append('rect')\n      .attr('x', 0)\n      .attr('y', curr_y)\n      .attr('rx', 5)\n      .attr('ry', 5)\n      .attr('width', width)\n      .attr('height', barHeight)\n      .style('fill', appcolor);\n\n    // App name\n    eg.append('text')\n      .attr('x', 5)\n      .attr('y', curr_y + 5 + textSize)\n      .text(app.name)\n      .attr('font-family', 'sans-serif')\n      .attr('font-size', textSize + 'px')\n      .attr('fill', 'black');\n\n    // Duration\n    eg.append('text')\n      .attr('x', 5)\n      .attr('y', curr_y + 5 + textSize + 5 + textSize)\n      .text(seconds_to_duration(app.duration))\n      .attr('font-family', 'sans-serif')\n      .attr('font-size', textSize + 'px')\n      .attr('fill', 'black');\n\n    curr_y += barHeight + 5;\n  });\n  curr_y -= 5;\n\n  svg.attr('height', curr_y);\n\n  return container;\n}\n\nfunction updateSummedEvents(container, summedEvents, titleKeyFunc, hoverKeyFunc, colorKeyFunc) {\n  if (hoverKeyFunc == null) {\n    hoverKeyFunc = titleKeyFunc;\n  }\n  const apps = _.map(summedEvents, e => {\n    return {\n      name: titleKeyFunc(e),\n      hovertext: hoverKeyFunc(e),\n      duration: e.duration,\n      colorKey: colorKeyFunc(e),\n    };\n  });\n  update(container, apps);\n}\n\nexport default {\n  create: create,\n  update: update,\n  updateSummedEvents: updateSummedEvents,\n  set_status: set_status,\n};\n","import Icon from '../components/Icon.vue'\n\nIcon.register({\n  'angle-double-down': {\n    width: 320,\n    height: 512,\n    paths: [\n      {\n        d: 'M143 256.3l-136-136c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.8 22.5c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.4 9.5-24.6 9.5-34 0.1zM177 448.3c-9.4 9.4-24.6 9.4-34-0.1l-136-136c-9.4-9.3-9.4-24.5 0-33.9l22.7-22.6c9.3-9.4 24.5-9.4 33.9 0l96.4 96.4 96.5-96.3c9.3-9.4 24.5-9.4 33.9 0l22.6 22.6c9.4 9.3 9.4 24.5 0 33.9z'\n      }\n    ]\n  }\n})\n","<template lang=\"pug\">\ndiv\n  div.aw-summary-container\n  b-button.mt-1(v-if=\"fields && fields.length > 0 && with_limit && fields.length > limit_\", size=\"sm\", variant=\"outline-secondary\", @click=\"limit_ += 5\")\n    icon(name=\"angle-double-down\")\n    | Show more\n</template>\n\n<style scoped lang=\"scss\">\n.aw-summary-container > svg {\n  border: 1px solid #999;\n  border-radius: 0.5em;\n}\n</style>\n\n<script>\n// NOTE: This is just a Vue.js component wrapper for summary.js\n//       Code should generally go in the framework-independent file.\n\nimport summary from './summary.js';\nimport 'vue-awesome/icons/angle-double-down';\n\nexport default {\n  name: 'aw-summary',\n  props: {\n    fields: Array,\n    namefunc: Function,\n    hoverfunc: {\n      type: Function,\n      default: null, // If not set we will default to namefunc\n    },\n    colorfunc: Function,\n    limit: {\n      type: Number,\n      default: 5,\n    },\n    with_limit: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data: function () {\n    return { limit_: this.limit };\n  },\n  watch: {\n    fields: function () {\n      this.update();\n    },\n    limit_: function () {\n      this.update();\n    },\n  },\n  mounted: function () {\n    const el = this.$el.children[0];\n    summary.create(el);\n    this.update();\n  },\n  methods: {\n    update: function () {\n      const el = this.$el.children[0];\n      if (this.fields !== null) {\n        summary.updateSummedEvents(\n          el,\n          this.fields.slice(0, this.limit_),\n          this.namefunc,\n          this.hoverfunc,\n          this.colorfunc\n        );\n      } else {\n        summary.set_status(el, 'Loading...');\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Summary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Summary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Summary.vue?vue&type=template&id=6885be95&scoped=true&lang=pug&\"\nimport script from \"./Summary.vue?vue&type=script&lang=js&\"\nexport * from \"./Summary.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Summary.vue?vue&type=style&index=0&id=6885be95&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6885be95\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}