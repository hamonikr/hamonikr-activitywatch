{"version":3,"sources":["webpack:///./node_modules/vue-awesome/icons/caret-right.js","webpack:///./src/visualizations/CategoryTree.vue?76b4","webpack:///src/visualizations/CategoryTree.vue","webpack:///./src/visualizations/CategoryTree.vue?1603","webpack:///./src/visualizations/CategoryTree.vue"],"names":["register","width","height","paths","d","render","_vm","this","_h","$createElement","_c","_self","_l","cat","staticStyle","style","depth","staticClass","attrs","_e","_v","_s","subname","_f","duration","staticRenderFns","name","props","events","computed","category_hierarchy","c","_","sumBy","_get_child_cats","all_cats","filter","_assign_children","parent","map","child_cats","children","sortBy","_flatten_hierarchy","flattenDeep","cats_with_depth0","cats","flatten","component"],"mappings":"gHAAA,gBAEA,aAAKA,SAAS,CACZ,cAAe,CACbC,MAAO,IACPC,OAAQ,IACRC,MAAO,CACL,CACEC,EAAG,mI,yCCRX,IAAIC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAMJ,EAAIM,GAAIN,EAAsB,oBAAE,SAASO,GAAK,OAAOH,EAAG,MAAM,CAACI,YAAY,CAAC,QAAU,oBAAoB,CAACJ,EAAG,OAAO,CAACK,MAAO,kBAAoB,IAAMF,EAAIG,MAAQ,GAAK,MAAO,CAAEH,EAAIG,MAAQ,EAAGN,EAAG,OAAO,CAACI,YAAY,CAAC,QAAU,QAAQ,CAACJ,EAAG,OAAO,CAACO,YAAY,OAAOC,MAAM,CAAC,KAAO,kBAAkB,GAAGZ,EAAIa,KAAKb,EAAIc,GAAGd,EAAIe,GAAGR,EAAIS,YAAYZ,EAAG,OAAO,CAACI,YAAY,CAAC,MAAQ,UAAU,CAACR,EAAIc,GAAGd,EAAIe,GAAGf,EAAIiB,GAAG,mBAAPjB,CAA2BO,EAAIW,mBAAkB,IACliBC,EAAkB,GCWtB,G,kDAAA,WACA,YAEA,GACEC,KAAM,kBACNC,MAAO,CACLC,OAAQ,CAAZ,aAEEC,SAAU,CACRC,mBAAoB,WAClB,IAAN,0CAEA,6BACA,qBACQ,MAAR,CAAU,KAAV,yBAIA,mDAQQ,OAPAC,EAAEP,SAAWQ,EAAEC,MACvB,sBACU,IAAV,6CACU,OAAV,wBAEA,YAAU,OAAV,cAEeF,KAGT,SAASG,EAAgBrB,EAAKsB,GAC5B,OAAOH,EAAEI,OAAOD,GAAU,SAAlC,wCAGM,SAASE,EAAiBC,EAAQH,GAChC,IAAR,SAEQH,EAAEO,IAAIC,GAAY,SAA1B,oBACQF,EAAOG,SAAWT,EAAEU,OAAOF,GAAY,SAA/C,wBAGM,IAAN,WACA,wBAAQ,OAAR,eACA,YAAQ,OAAR,cAKM,SAASG,EAAmBZ,GAC1B,OAAKA,EAAEU,SACAT,EAAEY,YAAY,CAACb,EAAGC,EAAEO,IAAIR,EAAEU,UAAU,SAAnD,oBADgC,GAM1B,OAVAT,EAAEO,IAAIM,GAAkB,SAA9B,oBAOMC,EAAOd,EAAEe,QAAQf,EAAEO,IAAIM,GAAkB,SAA/C,mBAGaC,KClEyU,I,YCOlVE,EAAY,eACd,EACA3C,EACAoB,GACA,EACA,KACA,KACA,MAIa,aAAAuB,E","file":"js/chunk-c503ebe6.d9b33a66.js","sourcesContent":["import Icon from '../components/Icon.vue'\n\nIcon.register({\n  'caret-right': {\n    width: 192,\n    height: 512,\n    paths: [\n      {\n        d: 'M0 384.7v-257.3c0-17.8 21.5-26.7 34.1-14.1l128.7 128.7c7.8 7.8 7.8 20.5 0 28.3l-128.7 128.7c-12.6 12.6-34.1 3.7-34.1-14.1z'\n      }\n    ]\n  }\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((_vm.category_hierarchy),function(cat){return _c('div',{staticStyle:{\"padding\":\"0.1em 0 0.1em 0\"}},[_c('span',{style:('padding-left: ' + (1.4 * cat.depth - 1) + 'em')},[(cat.depth > 0)?_c('span',{staticStyle:{\"opacity\":\"0.7\"}},[_c('icon',{staticClass:\"mr-1\",attrs:{\"name\":\"caret-right\"}})],1):_vm._e(),_vm._v(_vm._s(cat.subname))]),_c('span',{staticStyle:{\"float\":\"right\"}},[_vm._v(_vm._s(_vm._f(\"friendlyduration\")(cat.duration)))])])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\ndiv\n  div(v-for=\"cat in category_hierarchy\", style=\"padding: 0.1em 0 0.1em 0\")\n    span(:style=\"'padding-left: ' + (1.4 * cat.depth - 1) + 'em'\")\n      span(v-if=\"cat.depth > 0\", style=\"opacity: 0.7\") #[icon.mr-1(name=\"caret-right\")]\n      | {{cat.subname}}\n    span(style=\"float: right\")\n      | {{cat.duration | friendlyduration}}\n</template>\n\n<script>\nimport 'vue-awesome/icons/caret-right';\nconst _ = require('lodash');\nconst classes = require('~/util/classes.ts');\n\nexport default {\n  name: 'aw-categorytree',\n  props: {\n    events: { type: Array },\n  },\n  computed: {\n    category_hierarchy: function () {\n      const events = JSON.parse(JSON.stringify(this.events));\n\n      const hier = classes.build_category_hierarchy(\n        _.map(events, e => {\n          return { name: e.data['$category'] };\n        })\n      );\n\n      let cats = classes.flatten_category_hierarchy(hier).map(c => {\n        c.duration = _.sumBy(\n          events.filter(e => {\n            const pcat = e.data['$category'].slice(0, c.name.length);\n            return _.isEqual(c.name, pcat);\n          }),\n          e => e.duration\n        );\n        return c;\n      });\n\n      function _get_child_cats(cat, all_cats) {\n        return _.filter(all_cats, c => _.isEqual(c.parent, cat.name));\n      }\n\n      function _assign_children(parent, all_cats) {\n        const child_cats = _get_child_cats(parent, all_cats);\n        // Recurse\n        _.map(child_cats, c => _assign_children(c, all_cats));\n        parent.children = _.sortBy(child_cats, cc => -cc.duration);\n      }\n\n      const cats_with_depth0 = _.sortBy(\n        _.filter(cats, c => c.depth == 0),\n        c => -c.duration\n      );\n      _.map(cats_with_depth0, c => _assign_children(c, cats));\n\n      // Flattens the category hierarchy\n      function _flatten_hierarchy(c) {\n        if (!c.children) return [];\n        return _.flattenDeep([c, _.map(c.children, cc => _flatten_hierarchy(cc))]);\n      }\n      cats = _.flatten(_.map(cats_with_depth0, c => _flatten_hierarchy(c)));\n      //console.log(cats);\n      // TODO: If a category has children, but also activity attributed directly to the parent that does not belong to a child, then create a \"Other\" child containing the activity.\n      return cats;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CategoryTree.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CategoryTree.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CategoryTree.vue?vue&type=template&id=1f4358f3&lang=pug&\"\nimport script from \"./CategoryTree.vue?vue&type=script&lang=js&\"\nexport * from \"./CategoryTree.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}