{"version":3,"sources":["webpack:///./node_modules/lodash/fp/range.js","webpack:///./src/components/UserSatisfactionPoll.vue?c57b","webpack:///./src/components/UserSatisfactionPoll.vue?4f3d","webpack:///src/components/UserSatisfactionPoll.vue","webpack:///./src/components/UserSatisfactionPoll.vue?0eef","webpack:///./src/components/UserSatisfactionPoll.vue?5ca0"],"names":["convert","func","placeholder","module","exports","render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","on","$event","isPollVisible","_v","_l","i","directives","name","rawName","value","expression","domProps","_q","rating","staticStyle","_s","dontShowAgain","submit","_e","isPosFollowUpVisible","isNegFollowUpVisible","staticRenderFns","data","options","mounted","localStorage","initialTimestamp","retrieveData","isEnabled","nextPollTime","add","INITIAL_WAIT_PERIOD","timesPollIsShown","saveData","methods","getItem","JSON","parse","console","error","err","removeItem","setItem","parsed","parseInt","component"],"mappings":"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","file":"js/chunk-32f94bc2.644c3745.js","sourcesContent":["var convert = require('./convert'),\n    func = convert('range', require('../range'));\n\nfunc.placeholder = require('./placeholder');\nmodule.exports = func;\n","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSatisfactionPoll.vue?vue&type=style&index=0&id=6e9d9f1c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSatisfactionPoll.vue?vue&type=style&index=0&id=6e9d9f1c&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.isPollVisible)?_c('b-alert',{attrs:{\"variant\":\"info\",\"show\":\"\"}},[_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.isPollVisible=false}}},[_vm._v(\"×\")]),_c('form',[_c('p',[_vm._v(\"Hey there! You've been using ActivityWatch for a while. How likely are you to recommend it to a friend/colleague on a scale 1-10? (with 10 being the most likely)\")]),_c('div',{staticClass:\"radio-options\"},_vm._l((_vm.options),function(i){return _c('div',{staticClass:\"option-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.rating),expression:\"rating\"}],attrs:{\"type\":\"radio\",\"id\":'option' + i,\"name\":\"rating\"},domProps:{\"value\":i,\"checked\":_vm._q(_vm.rating,i)},on:{\"change\":function($event){_vm.rating=i}}}),_c('br'),_c('label',{staticStyle:{\"display\":\"block\"},attrs:{\"for\":'option' + i}},[_vm._v(_vm._s(i))])])}),0)]),_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-between\"}},[_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":_vm.dontShowAgain}},[_vm._v(\"Don't show again\")]),_c('input',{attrs:{\"type\":\"submit\",\"value\":\"Submit\"},on:{\"click\":_vm.submit}})])]):_vm._e(),(_vm.isPosFollowUpVisible)?_c('b-alert',{attrs:{\"variant\":\"info\",\"show\":\"\"}},[_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.isPosFollowUpVisible=false}}},[_vm._v(\"×\")]),_vm._v(\"We're really happy to hear you are enjoying ActivityWatch, but we think we can do even better! To help us help you, here are a few things you can do:\"),_c('ul',[_c('li',[_vm._v(\"Support us on \"),_c('a',{attrs:{\"href\":\"https://www.patreon.com/erikbjare\"}},[_vm._v(\"Patreon\")]),_vm._v(\" or \"),_c('a',{attrs:{\"href\":\"https://opencollective.com/activitywatch\"}},[_vm._v(\"Open Collective\")]),_vm._v(\" (or by \"),_c('a',{attrs:{\"href\":\"https://activitywatch.net/donate/\"}},[_vm._v(\"other donation methods\")]),_vm._v(\").\")]),_c('li',[_vm._v(\"Using ActivityWatch at work? Consider asking your employer to support us!\")]),_c('li',[_vm._v(\"Post about it on social media and tell your friends and colleagues! We are on \"),_c('a',{attrs:{\"href\":\"https://twitter.com/ActivityWatchIt\"}},[_vm._v(\"Twitter\")]),_vm._v(\" and \"),_c('a',{attrs:{\"href\":\"https://www.facebook.com/ActivityWatch\"}},[_vm._v(\"Facebook\")]),_vm._v(\".\")]),_c('li',[_vm._v(\"Vote for new features on the \"),_c('a',{attrs:{\"href\":\"https://forum.activitywatch.net/c/features\"}},[_vm._v(\"forum\")]),_vm._v(\".\")]),_c('li',[_vm._v(\"Rate us on \"),_c('a',{attrs:{\"href\":\"https://alternativeto.net/software/activitywatch/\"}},[_vm._v(\"AlternativeTo\")]),_vm._v(\" and \"),_c('a',{attrs:{\"href\":\"https://play.google.com/store/apps/details?id=net.activitywatch.android\"}},[_vm._v(\"Google Play Store\")]),_vm._v(\".\")]),_c('li',[_vm._v(\"Join our \"),_c('a',{attrs:{\"href\":\"https://discord.gg/vDskV9q\"}},[_vm._v(\"Discord server\")]),_vm._v(\".\")])])]):_vm._e(),(_vm.isNegFollowUpVisible)?_c('b-alert',{attrs:{\"variant\":\"info\",\"show\":\"\"}},[_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.isNegFollowUpVisible=false}}},[_vm._v(\"×\")]),_vm._v(\"We are sorry to hear that you did not like ActivityWatch, but we want to improve! We would be very thankful if you helped us by:\"),_c('ul',[_c('li',[_vm._v(\"Fill out the \"),_c('a',{attrs:{\"href\":\"https://forms.gle/q2N9K5RoERBV8kqPA\"}},[_vm._v(\"feedback form\")]),_vm._v(\".\")]),_c('li',[_vm._v(\"Vote for new features on the \"),_c('a',{attrs:{\"href\":\"https://forum.activitywatch.net/c/features\"}},[_vm._v(\"forum\")]),_vm._v(\".\")])])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  div\n    b-alert(v-if=\"isPollVisible\", variant=\"info\", show)\n      button(type=\"button\", class=\"close\", @click=\"isPollVisible=false\") &times;\n      form\n        p\n          | Hey there! You've been using ActivityWatch for a while. How likely are you to recommend it to a friend/colleague on a scale 1-10? (with 10 being the most likely)\n        div(class=\"radio-options\")\n          div(v-for=\"i in options\", class=\"option-group\")\n            input(type=\"radio\", :id=\"'option' + i\", name=\"rating\", :value=\"i\", v-model=\"rating\")\n            br\n            label(:for=\"'option' + i\", style=\"display: block\")\n              | {{ i }}\n      div(style=\"display: flex; justify-content: space-between\")\n        a(@click=\"dontShowAgain\" href=\"#\")\n          | Don't show again\n        input(type=\"submit\" value=\"Submit\" @click=\"submit\")\n\n    b-alert(v-if=\"isPosFollowUpVisible\", variant=\"info\" show)\n      button(type=\"button\", class=\"close\", @click=\"isPosFollowUpVisible=false\") &times;\n      | We're really happy to hear you are enjoying ActivityWatch, but we think we can do even better! To help us help you, here are a few things you can do:\n      ul\n        li\n          | Support us on #[a(href=\"https://www.patreon.com/erikbjare\") Patreon] or #[a(href=\"https://opencollective.com/activitywatch\") Open Collective] (or by #[a(href=\"https://activitywatch.net/donate/\") other donation methods]).\n        li\n          | Using ActivityWatch at work? Consider asking your employer to support us!\n        li\n          | Post about it on social media and tell your friends and colleagues! We are on #[a(href=\"https://twitter.com/ActivityWatchIt\") Twitter] and #[a(href=\"https://www.facebook.com/ActivityWatch\") Facebook].\n        //li\n          | Sign up for the newsletter.\n        li\n          | Vote for new features on the #[a(href=\"https://forum.activitywatch.net/c/features\") forum].\n        //li\n          | Fill out the #[a(href=\"https://forms.gle/q2N9K5RoERBV8kqPA\") feedback form].\n        li\n          | Rate us on #[a(href=\"https://alternativeto.net/software/activitywatch/\") AlternativeTo] and #[a(href=\"https://play.google.com/store/apps/details?id=net.activitywatch.android\") Google Play Store].\n        li\n          | Join our #[a(href=\"https://discord.gg/vDskV9q\") Discord server].\n\n    b-alert(v-if=\"isNegFollowUpVisible\", variant=\"info\" show)\n      button(type=\"button\", class=\"close\", @click=\"isNegFollowUpVisible=false\") &times;\n      | We are sorry to hear that you did not like ActivityWatch, but we want to improve! We would be very thankful if you helped us by:\n      ul\n        li\n          | Fill out the #[a(href=\"https://forms.gle/q2N9K5RoERBV8kqPA\") feedback form].\n        li\n          | Vote for new features on the #[a(href=\"https://forum.activitywatch.net/c/features\") forum].\n</template>\n\n<style scoped>\n.radio-options {\n  display: flex;\n  justify-content: space-around;\n}\n\n.option-group {\n  text-align: center;\n}\n\nul {\n  margin: 0;\n}\n</style>\n\n<script>\nimport { range } from 'lodash/fp';\nimport moment from 'moment';\n\nconst NUM_OPTIONS = 10;\n// INITIAL_WAIT_PERIOD is how long to wait from initialTimestamp to the first time that the poll shows up\nconst INITIAL_WAIT_PERIOD = 7 * 24 * 60 * 60;\n// BACKOFF_PERIOD is how many seconds to wait to show the poll again if the user closed it\nconst BACKOFF_PERIOD = 7 * 24 * 60 * 60;\n// The following may be used for testing\n// const INITIAL_WAIT_PERIOD = 1;\n// const BACKOFF_PERIOD = 1;\n\nexport default {\n  name: 'user-satisfaction-poll',\n  data() {\n    return {\n      isPollVisible: false,\n      isPosFollowUpVisible: false,\n      isNegFollowUpVisible: false,\n      // options is an array of [1, ..., NUM_OPTIONS]\n      options: range(1, NUM_OPTIONS + 1),\n      rating: null,\n      data: null,\n    };\n  },\n  mounted() {\n    // Check if initialTimestamp (first time that the user runs the web app) exists\n    let initialTimestamp = moment();\n    if (localStorage.initialTimestamp) {\n      initialTimestamp = moment(localStorage.initialTimestamp);\n    } else {\n      localStorage.initialTimestamp = initialTimestamp;\n    }\n\n    // Get the rest of the data\n    this.retrieveData();\n    if (!this.data) {\n      this.data = {\n        isEnabled: true,\n        nextPollTime: initialTimestamp.add(INITIAL_WAIT_PERIOD, 'seconds'),\n        timesPollIsShown: 0,\n      };\n      this.saveData();\n    }\n\n    if (!this.data.isEnabled) {\n      return;\n    }\n\n    // Show poll if enough time has passed\n    if (moment() >= moment(this.data.nextPollTime)) {\n      this.data.timesPollIsShown = this.data.timesPollIsShown + 1;\n      this.isPollVisible = true;\n      this.data.nextPollTime = moment().add(BACKOFF_PERIOD, 'seconds');\n    }\n\n    // Show the poll a maximum of 3 times\n    if (this.data.timesPollIsShown > 2) {\n      this.data.isEnabled = false;\n    }\n\n    this.saveData();\n  },\n  methods: {\n    retrieveData() {\n      if (localStorage.getItem('userSatisfactionPollData')) {\n        try {\n          this.data = JSON.parse(localStorage.getItem('userSatisfactionPollData'));\n        } catch (err) {\n          console.error('userSatisfactionPollData not found in localStorage: ', err);\n          localStorage.removeItem('userSatisfactionPollData');\n        }\n      }\n    },\n    saveData() {\n      const parsed = JSON.stringify(this.data);\n      localStorage.setItem('userSatisfactionPollData', parsed);\n    },\n    submit() {\n      this.isPollVisible = false;\n      this.data.isEnabled = false;\n      this.saveData();\n      if (parseInt(this.rating) >= 6) {\n        this.isPosFollowUpVisible = true;\n      } else {\n        this.isNegFollowUpVisible = true;\n      }\n    },\n    dontShowAgain() {\n      this.isPollVisible = false;\n      this.data.isEnabled = false;\n      this.saveData();\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSatisfactionPoll.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSatisfactionPoll.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserSatisfactionPoll.vue?vue&type=template&id=6e9d9f1c&scoped=true&lang=pug&\"\nimport script from \"./UserSatisfactionPoll.vue?vue&type=script&lang=js&\"\nexport * from \"./UserSatisfactionPoll.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserSatisfactionPoll.vue?vue&type=style&index=0&id=6e9d9f1c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6e9d9f1c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}