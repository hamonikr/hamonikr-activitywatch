(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a5c4e96"],{"06d5":function(t,e,a){},"26e9":function(t,e,a){"use strict";var n=a("23e7"),r=a("e8b5"),i=[].reverse,s=[1,2];n({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),i.call(this)}})},"2b10":function(t,e){function a(t,e,a){var n=-1,r=t.length;e<0&&(e=-e>r?0:r+e),a=a>r?r:a,a<0&&(a+=r),r=e>a?0:a-e>>>0,e>>>=0;var i=Array(r);while(++n<r)i[n]=t[n+e];return i}t.exports=a},3482:function(t,e,a){var n=a("087d"),r=a("5c69"),i=a("4359"),s=a("6747");function o(){var t=arguments.length;if(!t)return[];var e=Array(t-1),a=arguments[0],o=t;while(o--)e[o-1]=arguments[o];return n(s(a)?i(a):[a],r(e,1))}t.exports=o},"4e82":function(t,e,a){"use strict";var n=a("23e7"),r=a("1c0b"),i=a("7b0b"),s=a("d039"),o=a("a640"),c=[],l=c.sort,d=s((function(){c.sort(void 0)})),u=s((function(){c.sort(null)})),f=o("sort"),h=d||!u||!f;n({target:"Array",proto:!0,forced:h},{sort:function(t){return void 0===t?l.call(i(this)):l.call(i(this),r(t))}})},"69f38":function(t,e,a){t.exports=a("a59b")},a59b:function(t,e){function a(t){return t&&t.length?t[0]:void 0}t.exports=a},b259:function(t,e,a){"use strict";var n=a("06d5"),r=a.n(n);r.a},b2fc:function(t,e,a){"use strict";a.r(e);var n,r,i,s,o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sunburst"},[t._m(0),a("div",{staticClass:"main"},[a("div",{staticClass:"chart"},[a("div",{staticClass:"explanation"},[a("div",{staticClass:"base"},[t._v(t._s(t.centerMsg))]),t._m(1)])])])])},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar"},[a("div",{staticClass:"legend"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hover",staticStyle:{visibility:"hidden"}},[a("div",{staticClass:"date"}),a("div",{staticClass:"title"}),a("div",{staticClass:"time"}),a("div",{staticClass:"duration"}),a("div",{staticClass:"data",staticStyle:{"text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"}})])}],l=(a("99af"),a("96cf"),a("1da1")),d=a("ce20"),u=a.n(d),f=a("69f38"),h=a.n(f),p=a("3482"),v=a.n(p),m=a("c707"),g=a.n(m),y=(a("4de4"),a("c975"),a("26e9"),a("4e82"),a("d3b7"),a("ddb0"),a("5acd")),x=a("5698"),w=a("c1df"),b=a("e670"),k=750,C=600,M=Math.min(k,C)/2,A={afk:b.getColorFromString("afk"),"not-afk":b.getColorFromString("not-afk"),hibernating:b.getColorFromString("hibernating")};function S(){var t={w:75,h:30,s:3,r:3},e=x.select(".legend").append("svg:svg").attr("width",t.w).attr("height",x.keys(A).length*(t.h+t.s)),a=e.selectAll("g").data(x.entries(A)).enter().append("svg:g").attr("transform",(function(e,a){return"translate(0,"+a*(t.h+t.s)+")"}));a.append("svg:rect").attr("rx",t.r).attr("ry",t.r).attr("width",t.w).attr("height",t.h).style("fill",(function(t){return t.value})),a.append("svg:text").attr("x",t.w/2).attr("y",t.h/2).attr("dy","0.35em").attr("text-anchor","middle").text((function(t){return t.key}))}function _(t){var e=Math.cos(t),a=Math.sin(t);r.append("line").attr("x1",170*e).attr("y1",170*a).attr("x2",155*e).attr("y2",155*a).style("stroke","#CCC").style("stroke-width",1)}function O(t,e,a){var n=2*Math.PI*(t/24+e/24/60)-.5*Math.PI;_(n);var i=Math.cos(n),s=Math.sin(n);r.append("text").text(a||w({hours:t}).format("HH:mm")).attr("text-anchor","middle").attr("font-size","1.2em").style("fill","#999").attr("x",130*i).attr("y",5+140*s)}function I(t){console.log("Clicked"),console.log(t)}function R(t){var e=x.select(".explanation > .hover"),a=w(t.data.timestamp);e.select(".date").text(a.format("YYYY-MM-DD")),e.select(".time").text(a.format("HH:mm:ss"));var n=Object(y["seconds_to_duration"])(t.data.duration);e.select(".duration").text(n),e.select(".title").text(t.data.data.app||t.data.data.status),e.select(".data").text(t.data.data.title||""),x.select(".explanation > .base").style("display","none"),e.style("visibility","")}function B(t){R(t);var e=t.ancestors().reverse();e.shift(),n.selectAll("path").style("opacity",.5),n.selectAll("path").filter((function(t){return e.indexOf(t)>=0})).style("opacity",1)}function E(){n.selectAll("path").on("mouseover",null),n.selectAll("path").transition().duration(100).style("opacity",1).on("end",(function(){x.select(this).on("mouseover",B)})),n.select(".explanation > .base").style("display",""),n.select(".explanation > .hover").style("visibility","hidden")}function q(){var t=x.select(".sequence").append("svg:svg").attr("width",k).attr("height",50).attr("id","trail");t.append("svg:text").attr("id","endlabel").style("fill","#000")}function H(t){n=x.select(".chart"),n.selectAll("svg").remove(),r=n.append("svg:svg").attr("width",k).attr("height",C).append("svg:g").attr("id","container").attr("transform","translate("+k/2+","+C/2+")"),S(t),i=x.partition().size([2*Math.PI,M*M]),s=x.arc().startAngle((function(t){return t.x0})).endAngle((function(t){return t.x1})).innerRadius((function(t){return Math.sqrt(t.y0)})).outerRadius((function(t){return Math.sqrt(t.y1)}))}function $(t,e){q(),t.querySelector("#container").innerHTML="",r.append("svg:circle").attr("r",M).style("opacity",0);var a=x.hierarchy(e),n=i(a),o=!0;if(o){var c=!0,l=w(e.timestamp),d=w(e.timestamp).add(e.duration,"seconds");if(c){l=l.startOf("day"),d=l.clone().endOf("day"),O(0,0),O(6,0),O(12,0),O(18,0);var u=w();O(u.hour(),u.minute(),"Now")}n=n.each((function(t){var e=w(t.data.timestamp).diff(l,"seconds",!0),a=w(t.data.timestamp).add(t.data.duration,"seconds").diff(l,"seconds",!0),n=Math.max(0,e/((d-l)/1e3)),r=Math.min(1,a/((d-l)/1e3));t.x0=2*Math.PI*n,t.x1=2*Math.PI*r})).descendants()}else a=a.sum((function(t){return t.duration})).sort((function(t,e){return JSON.stringify(t.data.data).localeCompare(JSON.stringify(e.data.data))})),n=n.descendants();n=n.filter((function(t){var e=.001;return t.x1-t.x0>e})),r.data([e]).selectAll("path").data(n).enter().append("svg:path").attr("display",(function(t){return t.depth?null:"none"})).attr("d",s).attr("fill-rule","evenodd").style("fill",(function(t){return b.getColorFromString(t.data.data.status||t.data.data.app)})).style("opacity",1).on("mouseover",B).on("click",I),x.select("#container").on("mouseleave",E)}var z={create:H,update:$},N=a("c1df"),P=a.n(N),F={name:"aw-sunburst-clock",props:{date:{type:String},afkBucketId:{type:String},windowBucketId:{type:String}},data:function(){return{starttime:P()(),endtime:P()(),centerMsg:"Loading..."}},watch:{date:function(t){this.starttime=P()(t),this.endtime=P()(this.starttime).add(1,"days"),this.visualize()}},mounted:function(){z.create(this.$el),this.starttime=P()(this.date),this.endtime=P()(this.date).add(1,"days"),this.visualize()},methods:{todaysEvents:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=['RETURN = flood(query_bucket("'.concat(e,'"));')],t.next=3,this.$aw.query(["".concat(this.starttime.format(),"/").concat(this.endtime.format())],a);case 3:return n=t.sent,t.abrupt("return",n[0]);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),visualize:function(){var t=this;function e(t,e){t=g()(t,"timestamp","desc"),e=g()(e,"timestamp","desc");for(var a=0,n=0;n<t.length;n++){var r=t[n],i=P()(r.timestamp),s=i.clone().add(r.duration,"seconds");r.children=[];while(a<e.length){var o=e[a],c=P()(o.timestamp),l=c.clone().add(o.duration,"seconds"),d=l.isBefore(i),f=c.isAfter(i)&&l.isBefore(s),p=c.isAfter(s);if(d)a++;else if(f)r.children=v()(r.children,o),a++;else{if(p)break;console.warn("Between parents"),r.children=v()(r.children,o),a++}}}var m=P()(h()(t).timestamp),y=P()(u()(t).timestamp),x=(y-m)/1e3;return{timestamp:h()(t).timestamp,duration:x,data:{title:"ROOT"},children:t}}this.todaysEvents(this.afkBucketId).then((function(a){t.todaysEvents(t.windowBucketId).then((function(n){var r=null;a.length>0&&n.length>0?(r=e(a,n),t.centerMsg="Hover to inspect"):(r={timestamp:"",duration:0,data:{title:"ROOT"},children:[]},t.centerMsg="No data"),z.update(t.$el,r)}))}))}}},J=F,T=(a("b259"),a("2877")),Y=Object(T["a"])(J,o,c,!1,null,"2920aaea",null);e["default"]=Y.exports},ce20:function(t,e,a){var n=a("2b10");function r(t){var e=null==t?0:t.length;return e?n(t,1,e):[]}t.exports=r}}]);
//# sourceMappingURL=chunk-4a5c4e96.293f2b71.js.map