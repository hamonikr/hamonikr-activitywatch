{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.reverse.js","webpack:///./node_modules/lodash/_baseSlice.js","webpack:///./node_modules/lodash/concat.js","webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./node_modules/lodash/first.js","webpack:///./node_modules/lodash/head.js","webpack:///./src/visualizations/SunburstClock.vue?ee3f","webpack:///./src/visualizations/SunburstClock.vue?e7fa","webpack:///./src/visualizations/sunburst-clock.js","webpack:///src/visualizations/SunburstClock.vue","webpack:///./src/visualizations/SunburstClock.vue?1cc1","webpack:///./src/visualizations/SunburstClock.vue?1c1d","webpack:///./node_modules/lodash/tail.js"],"names":["$","isArray","nativeReverse","reverse","test","target","proto","forced","String","this","length","call","baseSlice","array","start","end","index","result","Array","module","exports","arrayPush","baseFlatten","copyArray","concat","arguments","args","aFunction","toObject","fails","arrayMethodIsStrict","nativeSort","sort","FAILS_ON_UNDEFINED","undefined","FAILS_ON_NULL","STRICT_METHOD","FORCED","comparefn","head","rootEl","vis","partition","arc","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","_s","centerMsg","staticRenderFns","staticStyle","d3","require","moment","color","width","height","radius","Math","min","legendData","afk","getColorFromString","hibernating","drawLegend","li","w","h","s","r","legend","select","append","attr","keys","g","selectAll","data","entries","enter","d","i","style","value","text","key","drawClockTick","a","xn","cos","yn","sin","drawClock","m","PI","hours","format","mouseclick","console","log","showInfo","hoverEl","timestamp","durationString","seconds_to_duration","duration","app","status","title","mouseover","sequenceArray","ancestors","shift","filter","node","indexOf","mouseleave","on","transition","initializeBreadcrumbTrail","trail","create","el","remove","size","startAngle","x0","endAngle","x1","innerRadius","sqrt","y0","outerRadius","y1","update","json","querySelector","innerHTML","root","hierarchy","nodes","mode_clock","show_whole_day","root_start","root_end","add","startOf","clone","endOf","now","hour","minute","each","loc_start_sec","diff","loc_end_sec","loc_start","max","loc_end","descendants","sum","b","JSON","stringify","localeCompare","threshold","depth","name","props","date","afkBucketId","windowBucketId","starttime","endtime","watch","visualize","mounted","methods","todaysEvents","buildHierarchy","parents","children","p","i_child","before_parent","warn","then","events_afk","events_window","component","tail"],"mappings":"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","file":"js/chunk-4a5c4e96.cb789678.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar isArray = require('../internals/is-array');\n\nvar nativeReverse = [].reverse;\nvar test = [1, 2];\n\n// `Array.prototype.reverse` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reverse\n// fix for Safari 12.0 bug\n// https://bugs.webkit.org/show_bug.cgi?id=188794\n$({ target: 'Array', proto: true, forced: String(test) === String(test.reverse()) }, {\n  reverse: function reverse() {\n    // eslint-disable-next-line no-self-assign\n    if (isArray(this)) this.length = this.length;\n    return nativeReverse.call(this);\n  }\n});\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","var arrayPush = require('./_arrayPush'),\n    baseFlatten = require('./_baseFlatten'),\n    copyArray = require('./_copyArray'),\n    isArray = require('./isArray');\n\n/**\n * Creates a new array concatenating `array` with any additional arrays\n * and/or values.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to concatenate.\n * @param {...*} [values] The values to concatenate.\n * @returns {Array} Returns the new concatenated array.\n * @example\n *\n * var array = [1];\n * var other = _.concat(array, 2, [3], [[4]]);\n *\n * console.log(other);\n * // => [1, 2, 3, [4]]\n *\n * console.log(array);\n * // => [1]\n */\nfunction concat() {\n  var length = arguments.length;\n  if (!length) {\n    return [];\n  }\n  var args = Array(length - 1),\n      array = arguments[0],\n      index = length;\n\n  while (index--) {\n    args[index - 1] = arguments[index];\n  }\n  return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));\n}\n\nmodule.exports = concat;\n","'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar fails = require('../internals/fails');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD;\n\n// `Array.prototype.sort` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? nativeSort.call(toObject(this))\n      : nativeSort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","module.exports = require('./head');\n","/**\n * Gets the first element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias first\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the first element of `array`.\n * @example\n *\n * _.head([1, 2, 3]);\n * // => 1\n *\n * _.head([]);\n * // => undefined\n */\nfunction head(array) {\n  return (array && array.length) ? array[0] : undefined;\n}\n\nmodule.exports = head;\n","import mod from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SunburstClock.vue?vue&type=style&index=0&id=2920aaea&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SunburstClock.vue?vue&type=style&index=0&id=2920aaea&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sunburst\"},[_vm._m(0),_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"chart\"},[_c('div',{staticClass:\"explanation\"},[_c('div',{staticClass:\"base\"},[_vm._v(_vm._s(_vm.centerMsg))]),_vm._m(1)])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sidebar\"},[_c('div',{staticClass:\"legend\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hover\",staticStyle:{\"visibility\":\"hidden\"}},[_c('div',{staticClass:\"date\"}),_c('div',{staticClass:\"title\"}),_c('div',{staticClass:\"time\"}),_c('div',{staticClass:\"duration\"}),_c('div',{staticClass:\"data\",staticStyle:{\"text-overflow\":\"ellipsis\",\"white-space\":\"nowrap\",\"overflow\":\"hidden\"}})])}]\n\nexport { render, staticRenderFns }","// Original source: https://bl.ocks.org/kerryrodden/7090426\n//\n// Copyright 2013 Google Inc. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nconst d3 = require('d3');\nconst moment = require('moment');\n\nimport { seconds_to_duration } from '../util/time.js';\nconst color = require('../util/color');\n\n// Dimensions of sunburst.\nconst width = 750;\nconst height = 600;\nconst radius = Math.min(width, height) / 2;\n\nconst legendData = {\n  afk: color.getColorFromString('afk'),\n  'not-afk': color.getColorFromString('not-afk'),\n  hibernating: color.getColorFromString('hibernating'),\n};\n\nlet rootEl; // The root DOM node of the graph as a d3 object\nlet vis; // The root SVG node of the graph as a d3 object\nlet partition;\nlet arc;\n\nfunction drawLegend() {\n  // Dimensions of legend item: width, height, spacing, radius of rounded rect.\n  const li = {\n    w: 75,\n    h: 30,\n    s: 3,\n    r: 3,\n  };\n\n  const legend = d3\n    .select('.legend')\n    .append('svg:svg')\n    .attr('width', li.w)\n    .attr('height', d3.keys(legendData).length * (li.h + li.s));\n\n  const g = legend\n    .selectAll('g')\n    .data(d3.entries(legendData))\n    .enter()\n    .append('svg:g')\n    .attr('transform', function (d, i) {\n      return 'translate(0,' + i * (li.h + li.s) + ')';\n    });\n\n  g.append('svg:rect')\n    .attr('rx', li.r)\n    .attr('ry', li.r)\n    .attr('width', li.w)\n    .attr('height', li.h)\n    .style('fill', function (d) {\n      return d.value;\n    });\n\n  g.append('svg:text')\n    .attr('x', li.w / 2)\n    .attr('y', li.h / 2)\n    .attr('dy', '0.35em')\n    .attr('text-anchor', 'middle')\n    .text(function (d) {\n      return d.key;\n    });\n}\n\nfunction drawClockTick(a) {\n  const xn = Math.cos(a);\n  const yn = Math.sin(a);\n\n  vis\n    .append('line')\n    .attr('x1', 170 * xn)\n    .attr('y1', 170 * yn)\n    .attr('x2', 155 * xn)\n    .attr('y2', 155 * yn)\n    .style('stroke', '#CCC')\n    .style('stroke-width', 1);\n}\n\nfunction drawClock(h, m, text) {\n  const a = 2 * Math.PI * (h / 24 + m / 24 / 60) - (1 / 2) * Math.PI;\n  drawClockTick(a);\n\n  const xn = Math.cos(a);\n  const yn = Math.sin(a);\n\n  vis\n    .append('text')\n    .text(text || moment({ hours: h }).format('HH:mm'))\n    .attr('text-anchor', 'middle')\n    .attr('font-size', '1.2em')\n    //.attr(\"font-weight\", \"bold\")\n    .style('fill', '#999')\n    .attr('x', 130 * xn)\n    .attr('y', 5 + 140 * yn);\n}\n\nfunction mouseclick(d) {\n  console.log('Clicked');\n  console.log(d);\n}\n\nfunction showInfo(d) {\n  const hoverEl = d3.select('.explanation > .hover');\n\n  const m = moment(d.data.timestamp);\n  hoverEl.select('.date').text(m.format('YYYY-MM-DD'));\n  hoverEl.select('.time').text(m.format('HH:mm:ss'));\n\n  const durationString = seconds_to_duration(d.data.duration);\n  hoverEl.select('.duration').text(durationString);\n\n  hoverEl.select('.title').text(d.data.data.app || d.data.data.status);\n\n  hoverEl.select('.data').text(d.data.data.title || '');\n\n  d3.select('.explanation > .base').style('display', 'none');\n  hoverEl.style('visibility', '');\n}\n\n// Fade all but the current sequence, and show it in the breadcrumb trail.\nfunction mouseover(d) {\n  showInfo(d);\n\n  const sequenceArray = d.ancestors().reverse();\n  sequenceArray.shift(); // remove root node from the array\n\n  // Fade all the segments.\n  rootEl.selectAll('path').style('opacity', 0.5);\n\n  // Then highlight only those that are an ancestor of the current segment.\n  // FIXME: This currently makes all other svg paths on the page faded as well\n  rootEl\n    .selectAll('path')\n    .filter(function (node) {\n      return sequenceArray.indexOf(node) >= 0;\n    })\n    .style('opacity', 1);\n}\n\n// Restore everything to full opacity when moving off the visualization.\nfunction mouseleave() {\n  // Deactivate all segments during transition.\n  rootEl.selectAll('path').on('mouseover', null);\n\n  // Transition each segment to full opacity and then reactivate it.\n  rootEl\n    .selectAll('path')\n    .transition()\n    .duration(100)\n    .style('opacity', 1)\n    .on('end', function () {\n      d3.select(this).on('mouseover', mouseover);\n    });\n\n  rootEl.select('.explanation > .base').style('display', '');\n  rootEl.select('.explanation > .hover').style('visibility', 'hidden');\n}\n\nfunction initializeBreadcrumbTrail() {\n  // Add the svg area.\n  const trail = d3\n    .select('.sequence')\n    .append('svg:svg')\n    .attr('width', width)\n    .attr('height', 50)\n    .attr('id', 'trail');\n  // Add the label at the end, for the percentage.\n  trail.append('svg:text').attr('id', 'endlabel').style('fill', '#000');\n}\n\nfunction create(el) {\n  // Clear the svg in case we are redrawing\n  rootEl = d3.select('.chart');\n  rootEl.selectAll('svg').remove();\n\n  vis = rootEl\n    .append('svg:svg')\n    .attr('width', width)\n    .attr('height', height)\n    .append('svg:g')\n    .attr('id', 'container')\n    .attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')');\n\n  drawLegend(el);\n\n  partition = d3.partition().size([2 * Math.PI, radius * radius]);\n\n  arc = d3\n    .arc()\n    .startAngle(function (d) {\n      return d.x0;\n    })\n    .endAngle(function (d) {\n      return d.x1;\n    })\n    .innerRadius(function (d) {\n      return Math.sqrt(d.y0);\n    })\n    .outerRadius(function (d) {\n      return Math.sqrt(d.y1);\n    });\n}\n\n// Main function to draw and set up the visualization, once we have the data.\nfunction update(el, json) {\n  // Basic setup of page elements.\n  initializeBreadcrumbTrail();\n\n  el.querySelector('#container').innerHTML = '';\n\n  // Bounding circle underneath the sunburst, to make it easier to detect\n  // when the mouse leaves the parent g.\n  vis.append('svg:circle').attr('r', radius).style('opacity', 0);\n\n  // Turn the data into a d3 hierarchy and calculate the sums.\n  let root = d3.hierarchy(json);\n  let nodes = partition(root);\n\n  const mode_clock = true;\n  if (mode_clock) {\n    // TODO: Make this a checkbox in the UI\n    const show_whole_day = true;\n\n    let root_start = moment(json.timestamp);\n    let root_end = moment(json.timestamp).add(json.duration, 'seconds');\n    if (show_whole_day) {\n      root_start = root_start.startOf('day');\n      root_end = root_start.clone().endOf('day');\n\n      drawClock(0, 0);\n      drawClock(6, 0);\n      drawClock(12, 0);\n      drawClock(18, 0);\n\n      // TODO: Draw only if showing today\n      const now = moment();\n      drawClock(now.hour(), now.minute(), 'Now');\n    }\n\n    nodes = nodes\n      .each(function (d) {\n        const loc_start_sec = moment(d.data.timestamp).diff(root_start, 'seconds', true);\n        const loc_end_sec = moment(d.data.timestamp)\n          .add(d.data.duration, 'seconds')\n          .diff(root_start, 'seconds', true);\n\n        const loc_start = Math.max(0, loc_start_sec / ((root_end - root_start) / 1000));\n        const loc_end = Math.min(1, loc_end_sec / ((root_end - root_start) / 1000));\n\n        d.x0 = 2 * Math.PI * loc_start;\n        d.x1 = 2 * Math.PI * loc_end;\n      })\n      .descendants();\n  } else {\n    root = root\n      .sum(d => d.duration)\n      .sort((a, b) => JSON.stringify(a.data.data).localeCompare(JSON.stringify(b.data.data)));\n    nodes = nodes.descendants();\n  }\n\n  // For efficiency, filter nodes to keep only those large enough to see.\n  nodes = nodes.filter(function (d) {\n    // 0.005 radians = 0.29 degrees\n    // If show_whole_day:\n    //   0.0044 rad = 1min\n    //   0.0011 rad = 15s\n    const threshold = 0.001;\n    return d.x1 - d.x0 > threshold;\n  });\n\n  vis\n    .data([json])\n    .selectAll('path')\n    .data(nodes)\n    .enter()\n    .append('svg:path')\n    .attr('display', function (d) {\n      return d.depth ? null : 'none';\n    })\n    .attr('d', arc)\n    .attr('fill-rule', 'evenodd')\n    .style('fill', function (d) {\n      return color.getColorFromString(d.data.data.status || d.data.data.app);\n    })\n    .style('opacity', 1)\n    .on('mouseover', mouseover)\n    .on('click', mouseclick);\n\n  // Add the mouseleave handler to the bounding circle.\n  d3.select('#container').on('mouseleave', mouseleave);\n}\n\n// NOTE: The original version of this sunburst contained a buildHierarchy\n//       function that's not used in our version.\n\nexport default {\n  create: create,\n  update: update,\n};\n","<template lang=\"pug\">\ndiv.sunburst\n  div.sidebar\n    div.legend\n\n  div.main\n    div.chart\n      div.explanation\n        div.base\n          | {{ centerMsg }}\n        div.hover(style=\"visibility: hidden\")\n          div.date\n          div.title\n          div.time\n          div.duration\n          div.data(style=\"text-overflow: ellipsis; white-space: nowrap; overflow: hidden;\")\n</template>\n\n<style scoped lang=\"scss\">\n.sunburst {\n  font-family: 'Open Sans', sans-serif;\n  font-size: 12px;\n  font-weight: 400;\n  width: 100%;\n  height: 620px;\n  margin-top: 10px;\n\n  .main {\n    width: 750px;\n    margin-right: auto;\n    margin-left: auto;\n  }\n\n  .sidebar {\n    float: left;\n    height: 0;\n    width: 100px;\n  }\n\n  .sequence {\n    width: 600px;\n    height: 70px;\n  }\n\n  .legend {\n    padding: 10px 0 0 3px;\n  }\n\n  .sequence text,\n  .legend text {\n    font-weight: 600;\n    fill: #fff;\n  }\n\n  .chart {\n    position: relative;\n  }\n\n  .chart path {\n    stroke: #fff;\n  }\n\n  .explanation {\n    position: absolute;\n    top: 260px;\n    left: 305px;\n    width: 140px;\n    text-align: center;\n    color: #666;\n    z-index: 10; // might not be needed\n\n    .base {\n      color: #ddd;\n      font-size: 2em;\n    }\n\n    .hover {\n      .date {\n        font-size: 0.8em;\n      }\n\n      .time {\n        font-size: 1em;\n      }\n\n      .title {\n        font-size: 2em;\n        font-weight: bold;\n      }\n\n      .duration {\n        font-size: 1em;\n      }\n\n      .data {\n        font-size: 1em;\n      }\n    }\n  }\n}\n</style>\n\n<script>\n// NOTE: This is just a Vue.js component wrapper for timeline-simple.js\n//       Code should generally go in the framework-independent file.\n\n// TODO: Sunburst requires a hierarchical data format\n\nimport sunburst from './sunburst-clock.js';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nexport default {\n  name: 'aw-sunburst-clock',\n  props: {\n    date: { type: String },\n    afkBucketId: { type: String },\n    windowBucketId: { type: String },\n  },\n\n  data: () => {\n    return {\n      starttime: moment(),\n      endtime: moment(),\n      centerMsg: 'Loading...',\n    };\n  },\n\n  watch: {\n    date: function (to) {\n      this.starttime = moment(to);\n      this.endtime = moment(this.starttime).add(1, 'days');\n      this.visualize();\n    },\n  },\n  mounted: function () {\n    sunburst.create(this.$el);\n    this.starttime = moment(this.date);\n    this.endtime = moment(this.date).add(1, 'days');\n    this.visualize();\n  },\n\n  methods: {\n    todaysEvents: async function (bucket_id) {\n      const querystr = [`RETURN = flood(query_bucket(\"${bucket_id}\"));`];\n      const data = await this.$aw.query(\n        [`${this.starttime.format()}/${this.endtime.format()}`],\n        querystr\n      );\n      return data[0];\n    },\n\n    visualize: function () {\n      function buildHierarchy(parents, children) {\n        parents = _.sortBy(parents, 'timestamp', 'desc');\n        children = _.sortBy(children, 'timestamp', 'desc');\n\n        let i_child = 0;\n        for (let i_parent = 0; i_parent < parents.length; i_parent++) {\n          const p = parents[i_parent];\n          const p_start = moment(p.timestamp);\n          const p_end = p_start.clone().add(p.duration, 'seconds');\n\n          p.children = [];\n          while (i_child < children.length) {\n            const e = children[i_child];\n            const e_start = moment(e.timestamp);\n            const e_end = e_start.clone().add(e.duration, 'seconds');\n\n            const before_parent = e_end.isBefore(p_start);\n            const within_parent = e_start.isAfter(p_start) && e_end.isBefore(p_end);\n            const after_parent = e_start.isAfter(p_end);\n\n            // TODO: This isn't correct, yet\n            if (before_parent) {\n              // Child is behind parent\n              //console.log(\"Too far behind: \" + i_child);\n              i_child++;\n            } else if (within_parent) {\n              //console.log(\"Added relation: \" + i_child);\n              p.children = _.concat(p.children, e);\n              i_child++;\n            } else if (after_parent) {\n              // Child is ahead of parent\n              //console.log(\"Too far ahead: \" + i_child);\n              break;\n            } else {\n              // TODO: Split events when this happens\n              console.warn('Between parents');\n              p.children = _.concat(p.children, e);\n              i_child++;\n            }\n          }\n        }\n\n        // Build the root node\n        //console.log(parents);\n        const m_start = moment(_.first(parents).timestamp);\n        const m_end = moment(_.tail(parents).timestamp);\n        const duration = (m_end - m_start) / 1000;\n        return {\n          timestamp: _.first(parents).timestamp,\n          // TODO: If we want a 12/24h clock, this has to change\n          duration: duration,\n          data: { title: 'ROOT' },\n          children: parents,\n        };\n      }\n\n      this.todaysEvents(this.afkBucketId).then(events_afk => {\n        this.todaysEvents(this.windowBucketId).then(events_window => {\n          let hierarchy = null;\n          if (events_afk.length > 0 && events_window.length > 0) {\n            hierarchy = buildHierarchy(events_afk, events_window);\n            this.centerMsg = 'Hover to inspect';\n          } else {\n            // FIXME: This should do the equivalent of \"No data\" when such is the case, but it doesn't.\n            hierarchy = {\n              timestamp: '',\n              // TODO: If we want a 12/24h clock, this has to change\n              duration: 0,\n              data: { title: 'ROOT' },\n              children: [],\n            };\n            this.centerMsg = 'No data';\n          }\n          sunburst.update(this.$el, hierarchy);\n        });\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SunburstClock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SunburstClock.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SunburstClock.vue?vue&type=template&id=2920aaea&scoped=true&lang=pug&\"\nimport script from \"./SunburstClock.vue?vue&type=script&lang=js&\"\nexport * from \"./SunburstClock.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SunburstClock.vue?vue&type=style&index=0&id=2920aaea&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2920aaea\",\n  null\n  \n)\n\nexport default component.exports","var baseSlice = require('./_baseSlice');\n\n/**\n * Gets all but the first element of `array`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * _.tail([1, 2, 3]);\n * // => [2, 3]\n */\nfunction tail(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseSlice(array, 1, length) : [];\n}\n\nmodule.exports = tail;\n"],"sourceRoot":""}