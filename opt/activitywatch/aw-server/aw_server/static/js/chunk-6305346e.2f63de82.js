(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6305346e"],{"25fd":function(e,t,r){"use strict";var a=r("79f7"),n=r.n(a);n.a},4962:function(e,t,r){},"59e7":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",[e._v("Buckets")]),r("b-alert",{attrs:{show:""}},[e._v("Are you looking to collect more data? Check out "),r("a",{attrs:{href:"https://activitywatch.readthedocs.io/en/latest/watchers.html"}},[e._v("the docs")]),e._v(" for more watchers.")]),r("b-table",{attrs:{hover:"",small:"",items:e.buckets,fields:e.fields,responsive:"md","sort-by":"last_updated","sort-desc":!0},scopedSlots:e._u([{key:"cell(id)",fn:function(t){return[r("small",[e._v(e._s(t.item.id))])]}},{key:"cell(hostname)",fn:function(t){return[r("small",[e._v(e._s(t.item.hostname))])]}},{key:"cell(last_updated)",fn:function(t){return[t.item.last_updated?r("small",[e._v(e._s(e._f("friendlytime")(t.item.last_updated)))]):e._e(),t.item.metadata&&t.item.metadata.end?r("small",[e._v(e._s(e._f("friendlytime")(t.item.metadata.end)))]):e._e()]}},{key:"cell(actions)",fn:function(t){return[r("b-button-toolbar",{staticClass:"float-right"},[r("b-button-group",{staticClass:"mx-1",attrs:{size:"sm"}},[r("b-button",{attrs:{variant:"primary",to:"/buckets/"+t.item.id}},[r("icon",{staticClass:"d-none d-md-inline-block",attrs:{name:"folder-open"}}),e._v("Open")],1),r("b-dropdown",{attrs:{variant:"outline-secondary",size:"sm",text:"More"}},[r("b-dropdown-item",{attrs:{href:e.$aw.baseURL+"/api/0/buckets/"+t.item.id+"/export",download:"aw-bucket-export-"+t.item.id+".json",title:"Export bucket to JSON",variant:"secondary"}},[r("icon",{attrs:{name:"download"}}),e._v("Export as JSON")],1),r("b-dropdown-divider"),r("b-dropdown-item-button",{attrs:{title:"Delete this bucket permanently",variant:"danger"},on:{click:function(r){return e.openDeleteBucketModal(t.item.id)}}},[r("icon",{attrs:{name:"trash"}}),e._v(" Delete bucket")],1)],1)],1)],1)]}}])}),r("b-modal",{attrs:{id:"delete-modal",title:"Danger!",centered:"","hide-footer":""}},[e._v('Are you sure you want to delete bucket "'+e._s(e.delete_bucket_selected)+'"?'),r("br"),r("br"),r("b",[e._v("This is permanent and cannot be undone!")]),r("hr"),r("div",{staticClass:"float-right"},[r("b-button",{staticClass:"mx-2",on:{click:function(t){return e.$root.$emit("bv::hide::modal","delete-modal")}}},[e._v("Cancel")]),r("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.deleteBucket(e.delete_bucket_selected)}}},[e._v("Confirm")])],1)]),r("h3",[e._v("Import and export buckets")]),r("b-card-group",{staticClass:"deck"},[r("b-card",{attrs:{header:"Import buckets"}},[e.import_error?r("b-alert",{attrs:{show:"",variant:"danger",dismissable:""}},[e._v(e._s(e.import_error))]):e._e(),r("b-form-file",{attrs:{placeholder:"Choose a file or drop file here...","drop-placeholder":"Drop file here..."},model:{value:e.import_file,callback:function(t){e.import_file=t},expression:"import_file"}}),e.import_file?r("div",{staticClass:"spinner-border",attrs:{role:"status"}}):e._e(),r("span",[e._v("A valid file to import is a JSON file from either an export of a single bucket or an export from multiple buckets. If there are buckets with the same name the import will fail")])],1),r("b-card",{attrs:{header:"Export buckets"}},[r("b-button",{attrs:{href:e.$aw.baseURL+"/api/0/export",download:"aw-bucket-export.json",title:"Export bucket to JSON",variant:"outline-secondary"}},[r("icon",{attrs:{name:"download"}}),e._v("Export all buckets as JSON")],1)],1)],1)],1)},n=[],o=(r("96cf"),r("1da1")),s=r("93c6"),i=r.n(s),c=(r("a56d"),r("0874"));c["default"].register({download:{width:512,height:512,paths:[{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1l-152.1 152.2c-7.5 7.5-19.8 7.5-27.3 0l-152.3-152.2c-12.6-12.6-3.7-34.1 14.1-34.1h87.8v-168c0-13.3 10.7-24 24-24zM512 376v112c0 13.3-10.7 24-24 24h-464c-13.3 0-24-10.7-24-24v-112c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49h146.7c13.3 0 24 10.7 24 24zM388 464c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zM452 464c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}]}}),c["default"].register({"folder-open":{width:576,height:512,paths:[{d:"M572.7 292.1l-72.4 124.2c-10.2 17.5-35 31.8-55.3 31.8h0-400c-18.5 0-30.1-20.1-20.7-36.1l72.4-124.2c10.2-17.5 35-31.8 55.3-31.8v0h400c18.5 0 30.1 20.1 20.7 36.1zM152 224c-34 0-65.8 18.3-82.9 47.6l-69.1 118.4v-278c0-26.5 21.5-48 48-48h160l64 64h160c26.5 0 48 21.5 48 48v48h-328z"}]}});var l={name:"Buckets",data:function(){return{import_file:null,import_error:null,delete_bucket_selected:null,fields:[{key:"id",label:"Bucket ID",sortable:!0},{key:"hostname",sortable:!0},{key:"last_updated",label:"Updated",sortable:!0},{key:"actions",label:""}]}},computed:{buckets:function(){return i()(this.$store.state.buckets.buckets,[function(e){return e.id}],["asc"])}},watch:{import_file:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==this.import_file){e.next=16;break}return console.log("Importing file"),e.prev=2,e.next=5,this.importBuckets(this.import_file);case 5:console.log("Import successful"),this.import_error=null,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](2),console.log("Import failed"),this.import_error="Import failed, see aw-server logs for more info";case 13:return e.next=15,this.$store.dispatch("buckets/loadBuckets");case 15:this.import_file=null;case 16:case"end":return e.stop()}}),e,this,[[2,9]])})));function t(t,r){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("buckets/ensureBuckets");case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{openDeleteBucketModal:function(e){this.delete_bucket_selected=e,this.$root.$emit("bv::show::modal","delete-modal")},deleteBucket:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("buckets/deleteBucket",{bucketId:t});case 2:this.$root.$emit("bv::hide::modal","delete-modal");case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),importBuckets:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new FormData,r.append("buckets.json",t),a={"Content-Type":"multipart/form-data"},e.abrupt("return",this.$aw.req.post("/0/import",r,{headers:a}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},u=l,d=(r("a2b0"),r("25fd"),r("2877")),p=Object(d["a"])(u,a,n,!1,null,"41622878",null);t["default"]=p.exports},"79f7":function(e,t,r){},a2b0:function(e,t,r){"use strict";var a=r("4962"),n=r.n(a);n.a},a56d:function(e,t,r){"use strict";var a=r("0874");a["default"].register({trash:{width:448,height:512,paths:[{d:"M432 32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h120l9.4-18.7c3.6-7.3 13.1-13.3 21.3-13.3h0.1 114.3 0c8.2 0 17.8 6 21.5 13.3l9.4 18.7h120zM53.2 467l-21.2-339h384l-21.2 339c-1.6 24.8-23 45-47.9 45h-245.8c-24.9 0-46.3-20.2-47.9-45z"}]}})}}]);
//# sourceMappingURL=chunk-6305346e.2f63de82.js.map