{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/util/classes.ts","webpack:///./src/util/filters.js","webpack:///./src/util/awclient.js","webpack:///./src/route.js","webpack:///./src/queries.ts","webpack:///./src/store/modules/activity.ts","webpack:///./src/store/modules/buckets.js","webpack:///./src/store/modules/categories.js","webpack:///./src/store/modules/views.js","webpack:///./src/store/index.js","webpack:///./src/App.vue?e76c","webpack:///src/App.vue","webpack:///./src/App.vue?382d","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/util/time.js","webpack:///./src/mixins/asyncErrorCaptured.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","_","level_sep","defaultCategories","rule","regex","ignore_case","build_category_hierarchy","classes","annotate","ch","name_pretty","join","subname","parent","depth","new_classes","map","all_full_names","Set","createMissingParents","children","filter","has","new_parent","add","assignChildren","classes_at_level","cls","child","JSON","stringify","flatten_category_hierarchy","hier","flattenDeep","h","level","saveClasses","localStorage","log","loadClasses","classes_json","parse","loadClassesForQuery","Vue","timestamp","moment","format","friendlydate","parseZone","seconds","seconds_to_duration","filters","orderBy","baseURL","awc","AWClient","testing","Home","Activity","ActivityView","Buckets","Bucket","QueryExplorer","Timeline","Settings","Stopwatch","Dev","use","VueRouter","router","routes","path","component","props","meta","subview","redirect","fullContainer","querystr_to_array","querystr","split","isDesktopParams","isAndroidParams","canonicalEvents","params","classes_str","replace","cat_filter_str","filter_classes","bid_window","bid_android","bid_afk","filter_afk","default_limit","appQuery","appbucket","filterCategories","browser_appnames","chrome","firefox","opera","brave","edge","vivaldi","browsersWithBuckets","browserbuckets","browsername_to_bucketid","keys","browserName","bucketId","bucket_id","browserEvents","bid_browsers","browser_appnames_str","fullDesktopQuery","windowbucket","afkbucket","filterAFK","b","editorActivityQuery","editorbuckets","q","editorbucket","concat","dailyActivityQuery","dailyActivityQueryAndroid","androidbucket","dateToTimeperiod","date","start","timeperiodToStr","tp","end","_state","available","top_apps","top_titles","browser","duration","top_domains","top_urls","editor","top_files","top_languages","top_projects","category","top","active","events","history","android","query_options","browser_buckets","editor_buckets","buckets","afk","timeperiodsAroundTimeperiod","timeperiod","periods","timeperiodStrsAroundTimeperiod","getters","getActiveHistoryAroundTimeperiod","state","_history","actions","ensure_loaded","commit","dispatch","info","loaded","force","root","warn","query_android","queries","_vm","$aw","query","errorHandler","query_window_empty","app_events","title_events","cat_events","active_events","query_desktop_full","query_browser_empty","domains","urls","query_editor","query_editor_empty","files","projects","languages","query_active_history","tp_str","active_history","pair","status","query_active_history_android","query_active_history_empty","set_available","window_available","browser_available","active_available","editor_available","android_available","get_buckets","rootGetters","host","load_demo","groupSumEventsBy","build_active_history","current_day","current_day_end","Math","random","f","es","window_events","app","title","url","$category","url_events","domain_events","URL","Date","toISOString","file","language","project","mutations","start_loading","query_window_completed","query_browser_completed","web_chunks","query_editor_completed","query_active_history_completed","namespaced","require","get_buckets_by_type","bucket","includes","get_buckets_by_host_and_type","afkBucketsByHost","windowBucketsByHost","id","startsWith","androidBucketsByHost","editorBuckets","browserBuckets","getBucket","bucketsByHostname","groupBy","ensureBuckets","loadBuckets","getBuckets","getBucketWithEvents","cloneDeep","getEvents","limit","getBucketsWithEvents","deleteBucket","update_buckets","classes_unsaved_changes","classes_hierarchy","all_categories","v","load","save","assign","updateClass","new_class","old_class","parent_depth","addClass","removeClass","restoreDefaultClasses","saveCompleted","defaultViews","elements","size","views","loadViews","views_json","restoreDefaults","addView","view","removeView","view_id","idx","indexOf","editView","el_id","find","addVisualization","removeVisualization","Vuex","debug","process","Store","activity","categories","strict","this","_h","$createElement","_c","_self","attrs","class","staticClass","_e","staticStyle","_m","_v","directives","rawName","expression","_s","hostname","version","staticRenderFns","activityViews","isNewReleaseCheckEnabled","computed","$route","mounted","BootstrapVue","Datetime","startOfDay","awclient","mixin","PRODUCTION","el","render","App","store","hrs","floor","min","sec","now","sinceNow","diff","asSeconds","round","humanize","get_day_start_with_offset","dateParam","dateMoment","startOf","start_of_day","start_of_day_hours","parseInt","start_of_day_minutes","hour","minute","get_day_end_with_offset","get_day_period","get_prev_day","datestr","get_next_day","get_offset","hours","minutes","get_today","subtract","handleError","vm","cur","$parent","hooks","$options","errorCaptured","hook","beforeCreate","that","methods","original","args"],"mappings":"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","file":"js/index.51163bc0.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"index\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-0e2f35f4\":\"cc5f3121\",\"chunk-14778464\":\"9bf9a9f3\",\"chunk-174d81f3\":\"4d0e4606\",\"chunk-23ffe9dd\":\"73c7fbfa\",\"chunk-2d0c0d7f\":\"f2de6dce\",\"chunk-2d0c76ef\":\"9a7cf8d1\",\"chunk-2d0c7b05\":\"b59a5f08\",\"chunk-2d0c8a76\":\"e35236e9\",\"chunk-082511c6\":\"927eea9e\",\"chunk-0e4d057b\":\"534df73b\",\"chunk-1b4b3240\":\"26453c28\",\"chunk-1ff0a466\":\"261fde6a\",\"chunk-6e57147f\":\"02c97bac\",\"chunk-735b296f\":\"09ac1b87\",\"chunk-7b06de0e\":\"d7c9a7ab\",\"chunk-d9f79038\":\"0a001768\",\"chunk-2d0c912a\":\"20d7fe13\",\"chunk-2d21a3d2\":\"126e58d2\",\"chunk-30071da5\":\"fc3fb450\",\"chunk-3a0b00f5\":\"936e49b3\",\"chunk-33f4b978\":\"6c2add19\",\"chunk-413b0673\":\"624a7e33\",\"chunk-6ca6a63a\":\"b5180ec1\",\"chunk-76a6ae89\":\"53ba007b\",\"chunk-789302cc\":\"31fdc356\",\"chunk-8b60352e\":\"60a2420b\",\"chunk-8ef514fe\":\"0a10d9a4\",\"chunk-b9a95f22\":\"6943b012\",\"chunk-c503ebe6\":\"2665ba21\",\"chunk-f7317988\":\"ba31db96\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-0e2f35f4\":1,\"chunk-14778464\":1,\"chunk-23ffe9dd\":1,\"chunk-082511c6\":1,\"chunk-1b4b3240\":1,\"chunk-1ff0a466\":1,\"chunk-6e57147f\":1,\"chunk-735b296f\":1,\"chunk-7b06de0e\":1,\"chunk-d9f79038\":1,\"chunk-3a0b00f5\":1,\"chunk-413b0673\":1,\"chunk-76a6ae89\":1,\"chunk-789302cc\":1,\"chunk-8ef514fe\":1,\"chunk-f7317988\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-0e2f35f4\":\"505c363e\",\"chunk-14778464\":\"39faf9be\",\"chunk-174d81f3\":\"31d6cfe0\",\"chunk-23ffe9dd\":\"953da2b9\",\"chunk-2d0c0d7f\":\"31d6cfe0\",\"chunk-2d0c76ef\":\"31d6cfe0\",\"chunk-2d0c7b05\":\"31d6cfe0\",\"chunk-2d0c8a76\":\"31d6cfe0\",\"chunk-082511c6\":\"b7c6dfd0\",\"chunk-0e4d057b\":\"31d6cfe0\",\"chunk-1b4b3240\":\"76c5ff31\",\"chunk-1ff0a466\":\"fbff640f\",\"chunk-6e57147f\":\"ab6476cf\",\"chunk-735b296f\":\"a0496e43\",\"chunk-7b06de0e\":\"e2d89bc6\",\"chunk-d9f79038\":\"60286c14\",\"chunk-2d0c912a\":\"31d6cfe0\",\"chunk-2d21a3d2\":\"31d6cfe0\",\"chunk-30071da5\":\"31d6cfe0\",\"chunk-3a0b00f5\":\"a812cb7c\",\"chunk-33f4b978\":\"31d6cfe0\",\"chunk-413b0673\":\"a1d3bd4e\",\"chunk-6ca6a63a\":\"31d6cfe0\",\"chunk-76a6ae89\":\"cf226472\",\"chunk-789302cc\":\"e076df76\",\"chunk-8b60352e\":\"31d6cfe0\",\"chunk-8ef514fe\":\"e988e168\",\"chunk-b9a95f22\":\"31d6cfe0\",\"chunk-c503ebe6\":\"31d6cfe0\",\"chunk-f7317988\":\"6acc752b\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","const _ = require('lodash');\n\nconst level_sep = '>';\n\ninterface Rule {\n  type: string;\n  regex?: string;\n  ignore_case?: boolean;\n}\n\ninterface Category {\n  id?: number;\n  name: string[];\n  name_pretty?: string;\n  subname?: string;\n  rule: Rule;\n  depth?: number;\n  parent?: string[];\n  children?: Category[];\n}\n\nexport const defaultCategories: Category[] = [\n  { name: ['Work'], rule: { type: 'regex', regex: 'Google Docs|libreoffice|ReText' } },\n  {\n    name: ['Work', 'Programming'],\n    rule: { type: 'regex', regex: 'GitHub|Stack Overflow|BitBucket|Gitlab|vim|Spyder|kate' },\n  },\n  {\n    name: ['Work', 'Programming', 'ActivityWatch'],\n    rule: { type: 'regex', regex: 'ActivityWatch|aw-', ignore_case: true },\n  },\n  { name: ['Media', 'Games'], rule: { type: 'regex', regex: 'Minecraft|RimWorld' } },\n  { name: ['Media', 'Video'], rule: { type: 'regex', regex: 'YouTube|Plex|VLC' } },\n  {\n    name: ['Media', 'Social Media'],\n    rule: { type: 'regex', regex: 'reddit|Facebook|Twitter|Instagram|devRant', ignore_case: true },\n  },\n  { name: ['Media', 'Music'], rule: { type: 'regex', regex: 'Spotify|Deezer', ignore_case: true } },\n  {\n    name: ['Comms', 'IM'],\n    rule: { type: 'regex', regex: 'Messenger|Telegram|Signal|WhatsApp|Rambox|Slack|Riot|Discord' },\n  },\n  { name: ['Comms', 'Email'], rule: { type: 'regex', regex: 'Gmail|Thunderbird|mutt|alpine' } },\n];\n\nexport function build_category_hierarchy(classes: Category[]): Category[] {\n  function annotate(c: Category) {\n    const ch = c.name;\n    c.name_pretty = ch.join(level_sep);\n    c.subname = ch.slice(-1)[0];\n    c.parent = ch.length > 1 ? ch.slice(0, -1) : null;\n    c.depth = ch.length - 1;\n    return c;\n  }\n\n  const new_classes = classes.slice().map(c => annotate(c));\n\n  // Insert dangling/undefined parents\n  const all_full_names = new Set(new_classes.map(c => c.name.join(level_sep)));\n\n  function createMissingParents(children) {\n    children\n      .map(c => c.parent)\n      .filter(p => !!p)\n      .map(p => {\n        const name = p.join(level_sep);\n        if (p && !all_full_names.has(name)) {\n          const new_parent = annotate({ name: p, rule: { type: null } });\n          classes.push(new_parent);\n          all_full_names.add(name);\n          // New parent might not be top-level, so we need to recurse\n          createMissingParents([new_parent]);\n        }\n      });\n  }\n\n  createMissingParents(new_classes);\n\n  function assignChildren(classes_at_level: Category[]) {\n    return classes_at_level.map(cls => {\n      cls.children = classes.filter(child => {\n        return child.parent && cls.name\n          ? JSON.stringify(child.parent) == JSON.stringify(cls.name)\n          : false;\n      });\n      assignChildren(cls.children);\n      return cls;\n    });\n  }\n\n  return assignChildren(classes.filter(c => !c.parent));\n}\n\nexport function flatten_category_hierarchy(hier: Category[]): Category[] {\n  return _.flattenDeep(\n    hier.map(h => {\n      const level = [h, flatten_category_hierarchy(h.children)];\n      h.children = [];\n      return level;\n    })\n  );\n}\n\nexport function saveClasses(classes: Category[]) {\n  localStorage.classes = JSON.stringify(classes);\n  console.log('Saved classes', localStorage.classes);\n}\n\nexport function loadClasses(): Category[] {\n  const classes_json = localStorage.classes;\n  if (classes_json && classes_json.length >= 1) {\n    return JSON.parse(classes_json);\n  } else {\n    return defaultCategories;\n  }\n}\n\nexport function loadClassesForQuery(): [string[], Rule][] {\n  return loadClasses()\n    .filter(c => c.rule.type !== null)\n    .map(c => {\n      return [c.name, c.rule];\n    });\n}\n","'use strict';\n\nimport _ from 'lodash';\nimport Vue from 'vue';\nimport { seconds_to_duration, friendlydate } from './time.js';\n\nimport moment from 'moment';\n\nVue.filter('shortdate', function (timestamp) {\n  return moment(timestamp).format('YYYY-MM-DD');\n});\n\nVue.filter('shorttime', function (timestamp) {\n  return moment(timestamp).format('HH:mm');\n});\n\nVue.filter('friendlytime', function (timestamp) {\n  return friendlydate(timestamp);\n});\n\nVue.filter('iso8601', function (timestamp) {\n  return moment.parseZone(timestamp).format();\n});\n\nVue.filter('friendlyduration', function (seconds) {\n  return seconds_to_duration(seconds);\n});\n\n// Apparently this is how we should do filters now\n// https://github.com/vuejs/vue/issues/2756#issuecomment-215508316\nVue.prototype.filters = {\n  //  filterBy: ...,\n  orderBy: _.orderBy,\n};\n","import { AWClient } from 'aw-client';\n\nlet baseURL = '';\n\n// If running with `npm node dev`, use testing server as origin.\n// Works since CORS is enabled by default when running `aw-server --testing`.\nif (!PRODUCTION) {\n  const protocol = 'http';\n  const hostname = '127.0.0.1';\n  const port = '5666';\n  baseURL = protocol + '://' + hostname + ':' + port;\n}\n\nconst awc = new AWClient('aw-webui', { testing: !PRODUCTION, baseURL });\n\nexport default awc;\n","import Vue from 'vue';\nimport VueRouter from 'vue-router';\n\nconst Home = () => import('./views/Home.vue');\n\n// Activity views for desktop\nconst Activity = () => import('./views/activity/Activity.vue');\nconst ActivityView = () => import('./views/activity/ActivityView.vue');\n\nconst Buckets = () => import('./views/Buckets.vue');\nconst Bucket = () => import('./views/Bucket.vue');\nconst QueryExplorer = () => import('./views/QueryExplorer.vue');\nconst Timeline = () => import('./views/Timeline.vue');\nconst Settings = () => import('./views/settings/Settings.vue');\nconst Stopwatch = () => import('./views/Stopwatch.vue');\nconst Dev = () => import('./views/Dev.vue');\n\nVue.use(VueRouter);\n\nconst router = new VueRouter({\n  routes: [\n    { path: '/', component: Home },\n    {\n      path: '/activity/:host/:periodLength?/:date?',\n      component: Activity,\n      props: true,\n      children: [\n        {\n          path: 'view/:view_id?',\n          meta: { subview: 'view' },\n          name: 'activity-view',\n          component: ActivityView,\n          props: true,\n        },\n        // Unspecified should redirect to summary view is the summary view\n        // (needs to be last since otherwise it'll always match first)\n        {\n          path: '',\n          redirect: 'view/',\n        },\n      ],\n    },\n    { path: '/buckets', component: Buckets },\n    { path: '/buckets/:id', component: Bucket, props: true },\n    { path: '/timeline', component: Timeline, meta: { fullContainer: true } },\n    { path: '/query', component: QueryExplorer },\n    { path: '/settings', component: Settings },\n    { path: '/stopwatch', component: Stopwatch },\n    { path: '/dev', component: Dev },\n  ],\n});\n\nexport default router;\n","import _ from 'lodash';\n\n// TODO: Sanitize string input of buckets\n\nfunction querystr_to_array(querystr: string): string[] {\n  return querystr\n    .split(';')\n    .filter(l => l)\n    .map(l => l + ';');\n}\n\ninterface BaseQueryParams {\n  include_audible?: boolean;\n  classes: Record<string, any>;\n  filter_classes: string[][];\n}\n\ninterface DesktopQueryParams extends BaseQueryParams {\n  bid_window: string;\n  bid_afk: string;\n  filter_afk: boolean;\n  bid_browsers?: string[];\n}\n\ninterface AndroidQueryParams extends BaseQueryParams {\n  bid_android: string;\n  bid_browsers?: string[];\n}\n\nfunction isDesktopParams(object: any): object is DesktopQueryParams {\n  return 'bid_window' in object;\n}\n\nfunction isAndroidParams(object: any): object is AndroidQueryParams {\n  return 'bid_android' in object;\n}\n\n// Constructs a query that returns a fully-detailed list of events from the merging of several sources (window, afk, web).\n// Performs:\n//  - AFK filtering (if filter_afk is true)\n//  - Categorization (if classes specified)\n//  - Filters by category (if filter_classes set)\n// Puts it's results in `events` and `not_afk` (if not_afk available for platform).\nfunction canonicalEvents(params: DesktopQueryParams | AndroidQueryParams): string {\n  // Needs escaping for regex patterns like '\\w' to work (JSON.stringify adds extra unecessary escaping)\n  const classes_str = JSON.stringify(params.classes).replace('\\\\\\\\', '\\\\');\n  const cat_filter_str = JSON.stringify(params.filter_classes);\n  const bid_window = isDesktopParams(params) ? params.bid_window : params.bid_android;\n\n  return `\n    events = flood(query_bucket(\"${bid_window}\"));\n    ${\n      isDesktopParams(params)\n        ? `not_afk = flood(query_bucket(\"${params.bid_afk}\"));\n           not_afk = filter_keyvals(not_afk, \"status\", [\"not-afk\"]);`\n        : ''\n    }\n    ${isAndroidParams(params) ? 'events = merge_events_by_keys(events, [\"app\"]);' : ''}\n\n    ${\n      isDesktopParams(params) && params.filter_afk\n        ? 'events = filter_period_intersect(events, not_afk);'\n        : ''\n    }\n    ${params.classes ? `events = categorize(events, ${classes_str});` : ''}\n    ${\n      params.filter_classes\n        ? `events = filter_keyvals(events, \"$category\", ${cat_filter_str});`\n        : ''\n    }\n  `;\n}\n\nconst default_limit = 100; // Hardcoded limit per group\n\nexport function appQuery(appbucket: string, classes, filterCategories: string[][]): string[] {\n  appbucket = appbucket.replace('\"', '\\\\\"');\n  const params: AndroidQueryParams = {\n    bid_android: appbucket,\n    classes: classes,\n    filter_classes: filterCategories,\n  };\n\n  const code = `\n    ${canonicalEvents(params)}\n\n    title_events = sort_by_duration(merge_events_by_keys(events, [\"app\", \"classname\"]));\n    app_events   = sort_by_duration(merge_events_by_keys(title_events, [\"app\"]));\n    cat_events   = sort_by_duration(merge_events_by_keys(events, [\"$category\"]));\n\n    events = sort_by_timestamp(events);\n    app_events  = limit_events(app_events, ${default_limit});\n    title_events  = limit_events(title_events, ${default_limit});\n    duration = sum_durations(events);\n    RETURN  = {\"app_events\": app_events, \"title_events\": title_events, \"cat_events\": cat_events, \"duration\": duration, \"active_events\": app_events};\n  `;\n  return querystr_to_array(code);\n}\n\nconst browser_appnames = {\n  chrome: [\n    // Chrome\n    'Google Chrome',\n    'Google-chrome',\n    'chrome.exe',\n\n    // Chromium\n    'Chromium',\n    'Chromium-browser',\n    'Chromium-browser-chromium',\n    'chromium.exe',\n\n    // Pre-releases\n    'Google-chrome-beta',\n    'Google-chrome-unstable',\n\n    // Brave (should this be merged with the brave entry?)\n    'Brave-browser',\n  ],\n  firefox: [\n    'Firefox',\n    'Firefox.exe',\n    'firefox',\n    'firefox.exe',\n    'Firefox Developer Edition',\n    'firefoxdeveloperedition',\n    'Firefox-esr',\n    'Firefox Beta',\n    'Nightly',\n  ],\n  opera: ['opera.exe', 'Opera'],\n  brave: ['brave.exe'],\n  edge: ['msedge.exe'],\n  vivaldi: ['Vivaldi-stable', 'Vivaldi-snapshot', 'vivaldi.exe'],\n};\n\n// Returns a list of (browserName, bucketId) pairs for found browser buckets\nfunction browsersWithBuckets(browserbuckets: string[]): [string, string][] {\n  const browsername_to_bucketid: [string, string | undefined][] = _.map(\n    Object.keys(browser_appnames),\n    browserName => {\n      const bucketId = _.find(browserbuckets, bucket_id => _.includes(bucket_id, browserName));\n      return [browserName, bucketId];\n    }\n  );\n  // Skip browsers for which a bucket couldn't be found\n  return _.filter(browsername_to_bucketid, ([, bucketId]) => bucketId !== undefined);\n}\n\n// Returns a list of active browser events (where the browser was the active window) from all browser buckets\nfunction browserEvents(params: DesktopQueryParams): string {\n  let code = `\n    browser_events = [];\n  `;\n\n  _.each(browsersWithBuckets(params.bid_browsers), ([browserName, bucketId]) => {\n    const browser_appnames_str = JSON.stringify(browser_appnames[browserName]);\n    code += `events_${browserName} = flood(query_bucket(\"${bucketId}\"));\n       window_${browserName} = filter_keyvals(events, \"app\", ${browser_appnames_str});\n       events_${browserName} = filter_period_intersect(events_${browserName}, window_${browserName});\n       events_${browserName} = split_url_events(events_${browserName});\n       browser_events = sort_by_timestamp(concat(browser_events, events_${browserName}));`;\n  });\n  return code;\n}\n\nexport function fullDesktopQuery(\n  browserbuckets: string[],\n  windowbucket: string,\n  afkbucket: string,\n  filterAFK = true,\n  classes,\n  filterCategories: string[][]\n): string[] {\n  // Escape `\"`\n  browserbuckets = _.map(browserbuckets, b => b.replace('\"', '\\\\\"'));\n  windowbucket = windowbucket.replace('\"', '\\\\\"');\n  afkbucket = afkbucket.replace('\"', '\\\\\"');\n\n  // TODO: Get classes\n  const params: DesktopQueryParams = {\n    bid_window: windowbucket,\n    bid_afk: afkbucket,\n    bid_browsers: browserbuckets,\n    classes: classes,\n    filter_classes: filterCategories,\n    filter_afk: filterAFK,\n  };\n\n  return querystr_to_array(\n    `\n    ${canonicalEvents(params)}\n    title_events = sort_by_duration(merge_events_by_keys(events, [\"app\", \"title\"]));\n    app_events   = sort_by_duration(merge_events_by_keys(title_events, [\"app\"]));\n    cat_events   = sort_by_duration(merge_events_by_keys(events, [\"$category\"]));\n\n    app_events  = limit_events(app_events, ${default_limit});\n    title_events  = limit_events(title_events, ${default_limit});\n    duration = sum_durations(events);\n\n    ${browserEvents(params)}\n    browser_events = split_url_events(browser_events);\n    browser_urls = merge_events_by_keys(browser_events, [\"url\"]);\n    browser_urls = sort_by_duration(browser_urls);\n    browser_urls = limit_events(browser_urls, ${default_limit});\n    browser_domains = merge_events_by_keys(browser_events, [\"$domain\"]);\n    browser_domains = sort_by_duration(browser_domains);\n    browser_domains = limit_events(browser_domains, ${default_limit});\n    browser_duration = sum_durations(browser_events);\n\n    RETURN = {\n        \"window\": {\n            \"app_events\": app_events,\n            \"title_events\": title_events,\n            \"cat_events\": cat_events,\n            \"active_events\": not_afk,\n            \"duration\": duration\n        },\n        \"browser\": {\n            \"domains\": browser_domains,\n            \"urls\": browser_urls,\n            \"duration\": browser_duration\n        }\n    };`\n  );\n}\n\nexport function editorActivityQuery(editorbuckets: string[]): string[] {\n  let q = ['events = [];'];\n  for (let editorbucket of editorbuckets) {\n    editorbucket = editorbucket.replace('\"', '\\\\\"');\n    q.push('events = concat(events, flood(query_bucket(\"' + editorbucket + '\")));');\n  }\n  q = q.concat([\n    'files = sort_by_duration(merge_events_by_keys(events, [\"file\", \"language\"]));',\n    `files = limit_events(files, ${default_limit});`,\n    'languages = sort_by_duration(merge_events_by_keys(events, [\"language\"]));',\n    `languages = limit_events(languages, ${default_limit});`,\n    'projects = sort_by_duration(merge_events_by_keys(events, [\"project\"]));',\n    `projects = limit_events(projects, ${default_limit});`,\n    'duration = sum_durations(events);',\n    'RETURN = {\"files\": files, \"languages\": languages, \"projects\": projects, \"duration\": duration};',\n  ]);\n  return q;\n}\n\nexport function dailyActivityQuery(afkbucket: string): string[] {\n  afkbucket = afkbucket.replace('\"', '\\\\\"');\n  return [\n    'afkbucket = \"' + afkbucket + '\";',\n    'not_afk = flood(query_bucket(afkbucket));',\n    'not_afk = filter_keyvals(not_afk, \"status\", [\"not-afk\"]);',\n    'not_afk = merge_events_by_keys(not_afk, [\"status\"]);',\n    'RETURN = not_afk;',\n  ];\n}\n\nexport function dailyActivityQueryAndroid(androidbucket: string): string[] {\n  androidbucket = androidbucket.replace('\"', '\\\\\"');\n  return [`events = query_bucket(\"${androidbucket}\");`, 'RETURN = sum_durations(events);'];\n}\n\nexport default {\n  fullDesktopQuery,\n  appQuery,\n  dailyActivityQuery,\n  dailyActivityQueryAndroid,\n  editorActivityQuery,\n};\n","import moment from 'moment';\nimport { unitOfTime } from 'moment';\nimport * as _ from 'lodash';\nimport { map, filter, values, groupBy, sortBy, flow, reverse } from 'lodash/fp';\nimport queries from '~/queries';\nimport { loadClassesForQuery } from '~/util/classes';\nimport { get_day_start_with_offset } from '~/util/time';\n\ninterface TimePeriod {\n  start: string;\n  length: [number, string];\n}\n\nfunction dateToTimeperiod(date: string): TimePeriod {\n  return { start: get_day_start_with_offset(date), length: [1, 'day'] };\n}\n\nfunction timeperiodToStr(tp: TimePeriod): string {\n  const start = moment(tp.start).format();\n  const end = moment(start)\n    .add(tp.length[0], tp.length[1] as moment.unitOfTime.DurationConstructor)\n    .format();\n  return [start, end].join('/');\n}\n\ninterface QueryOptions {\n  host: string;\n  date?: string;\n  timeperiod?: TimePeriod;\n  filterAFK?: boolean;\n  filterCategories?: string[][];\n  force?: boolean;\n}\n\n// initial state\nconst _state = {\n  window: {\n    available: false,\n    top_apps: [],\n    top_titles: [],\n  },\n\n  browser: {\n    available: false,\n    duration: [],\n    top_domains: [],\n    top_urls: [],\n  },\n\n  editor: {\n    available: false,\n    duration: [],\n    top_files: [],\n    top_languages: [],\n    top_projects: [],\n  },\n\n  category: {\n    available: false,\n    top: [],\n  },\n\n  active: {\n    available: false,\n    duration: 0,\n    // non-afk events (no detail data) for the current period\n    events: [],\n    // Aggregated events for current and past periods\n    history: {},\n  },\n\n  android: {\n    available: false,\n  },\n\n  query_options: {\n    browser_buckets: 'all',\n    editor_buckets: 'all',\n  },\n\n  buckets: {\n    afk: [],\n    window: [],\n    editor: [],\n    browser: [],\n    android: [],\n  },\n};\n\nfunction timeperiodsAroundTimeperiod(timeperiod: TimePeriod): TimePeriod[] {\n  const periods = [];\n  for (let i = -15; i <= 15; i++) {\n    const start = moment(timeperiod.start)\n      .add(i * timeperiod.length[0], timeperiod.length[1] as moment.unitOfTime.DurationConstructor)\n      .format();\n    periods.push({ ...timeperiod, start });\n  }\n  return periods;\n}\n\nfunction timeperiodStrsAroundTimeperiod(timeperiod: TimePeriod): string[] {\n  return timeperiodsAroundTimeperiod(timeperiod).map(timeperiodToStr);\n}\n\n// getters\nconst getters = {\n  getActiveHistoryAroundTimeperiod: state => (timeperiod: TimePeriod) => {\n    const periods = timeperiodStrsAroundTimeperiod(timeperiod);\n    const _history = periods.map(tp => {\n      if (_.has(state.active.history, tp)) {\n        return state.active.history[tp];\n      } else {\n        // A zero-duration placeholder until new data has been fetched\n        return [{ timestamp: moment(tp.split('/')[0]).format(), duration: 0, data: {} }];\n      }\n    });\n    return _history;\n  },\n};\n\n// actions\nconst actions = {\n  async ensure_loaded({ commit, state, dispatch }, query_options: QueryOptions) {\n    console.info('Query options: ', query_options);\n    if (!state.loaded || state.query_options !== query_options || query_options.force) {\n      commit('start_loading', query_options);\n      if (!query_options.timeperiod) {\n        query_options.timeperiod = dateToTimeperiod(query_options.date);\n      }\n\n      await dispatch('buckets/ensureBuckets', null, { root: true });\n      await dispatch('get_buckets', query_options);\n\n      // TODO: These queries can actually run in parallel, but since server won't process them in parallel anyway we won't.\n      await dispatch('set_available', query_options);\n\n      if (state.window.available) {\n        await dispatch('query_desktop_full', query_options);\n      } else if (state.android.available) {\n        await dispatch('query_android', query_options);\n      } else {\n        console.log(\n          'Cannot query windows as we are missing either an afk/window bucket pair or an android bucket'\n        );\n        await dispatch('query_window_empty', query_options);\n        await dispatch('query_browser_empty', query_options);\n      }\n\n      if (state.active.available) {\n        await dispatch('query_active_history', query_options);\n      } else if (state.android.available) {\n        await dispatch('query_active_history_android', query_options);\n      } else {\n        console.log('Cannot call query_active_history as we do not have an afk bucket');\n        await dispatch('query_active_history_empty', query_options);\n      }\n\n      if (state.editor.available) {\n        await dispatch('query_editor', query_options);\n      } else {\n        console.log('Cannot call query_editor as we do not have any editor buckets');\n        await dispatch('query_editor_empty', query_options);\n      }\n    } else {\n      console.warn(\n        'ensure_loaded called twice with same query_options but without query_options.force = true, skipping...'\n      );\n    }\n  },\n\n  async query_android({ state, commit }, { timeperiod, filterCategories }: QueryOptions) {\n    const periods = [timeperiodToStr(timeperiod)];\n    const classes = loadClassesForQuery();\n    const q = queries.appQuery(state.buckets.android[0], classes, filterCategories);\n    const data = await this._vm.$aw.query(periods, q).catch(this.errorHandler);\n    commit('query_window_completed', data[0]);\n  },\n\n  async query_window_empty({ commit }) {\n    const data = {\n      app_events: [],\n      title_events: [],\n      cat_events: [],\n      active_events: [],\n      duration: 0,\n    };\n    commit('query_window_completed', data);\n  },\n\n  async query_desktop_full(\n    { state, commit },\n    { timeperiod, filterCategories, filterAFK }: QueryOptions\n  ) {\n    const periods = [timeperiodToStr(timeperiod)];\n    const classes = loadClassesForQuery();\n    const q = queries.fullDesktopQuery(\n      state.buckets.browser,\n      state.buckets.window[0],\n      state.buckets.afk[0],\n      filterAFK,\n      classes,\n      filterCategories\n    );\n    const data = await this._vm.$aw.query(periods, q);\n    commit('query_browser_completed', data[0].browser);\n    commit('query_window_completed', data[0].window);\n  },\n\n  async query_browser_empty({ commit }) {\n    const data = {\n      domains: [],\n      urls: [],\n      duration: 0,\n    };\n    commit('query_browser_completed', data);\n  },\n\n  async query_editor({ state, commit }, { timeperiod }) {\n    const periods = [timeperiodToStr(timeperiod)];\n    const q = queries.editorActivityQuery(state.buckets.editor);\n    const data = await this._vm.$aw.query(periods, q);\n    commit('query_editor_completed', data[0]);\n  },\n\n  async query_editor_empty({ commit }) {\n    const data = {\n      files: [],\n      projects: [],\n      languages: [],\n    };\n    commit('query_editor_completed', data);\n  },\n\n  async query_active_history({ commit, state }, { timeperiod }: QueryOptions) {\n    const periods = timeperiodStrsAroundTimeperiod(timeperiod).filter(tp_str => {\n      return !_.includes(state.active.history, tp_str);\n    });\n    const data = await this._vm.$aw.query(\n      periods,\n      queries.dailyActivityQuery(state.buckets.afk[0])\n    );\n    const active_history = _.zipObject(\n      periods,\n      _.map(data, pair => _.filter(pair, e => e.data.status == 'not-afk'))\n    );\n    commit('query_active_history_completed', { active_history });\n  },\n\n  async query_active_history_android({ commit, state }, { timeperiod }: QueryOptions) {\n    const periods = timeperiodStrsAroundTimeperiod(timeperiod).filter(tp_str => {\n      return !_.includes(state.active.history, tp_str);\n    });\n    const data = await this._vm.$aw.query(\n      periods,\n      queries.dailyActivityQueryAndroid(state.buckets.android[0])\n    );\n    let active_history = _.zipObject(periods, data);\n    active_history = _.mapValues(active_history, (duration, key) => {\n      return [{ timestamp: key.split('/')[0], duration, data: { status: 'not-afk' } }];\n    });\n    commit('query_active_history_completed', { active_history });\n  },\n\n  async query_active_history_empty({ commit }) {\n    const data = [];\n    commit('query_active_history_completed', data);\n  },\n\n  async set_available({ commit, state }) {\n    const window_available = state.buckets.afk.length > 0 && state.buckets.window.length > 0;\n    const browser_available =\n      state.buckets.afk.length > 0 &&\n      state.buckets.window.length > 0 &&\n      state.buckets.browser.length > 0;\n    const active_available = state.buckets.afk.length > 0;\n    const editor_available = state.buckets.editor.length > 0;\n    const android_available = state.buckets.android.length > 0;\n    commit('set_available', {\n      window_available: window_available,\n      browser_available: browser_available,\n      active_available: active_available,\n      editor_available: editor_available,\n      android_available: android_available,\n    });\n  },\n\n  async get_buckets({ commit, rootGetters }, { host }) {\n    const buckets = {\n      afk: rootGetters['buckets/afkBucketsByHost'](host),\n      window: rootGetters['buckets/windowBucketsByHost'](host),\n      android: rootGetters['buckets/androidBucketsByHost'](host),\n      browser: rootGetters['buckets/browserBuckets'],\n      editor: rootGetters['buckets/editorBuckets'],\n    };\n    console.log('Available buckets: ', buckets);\n    commit('buckets', buckets);\n  },\n\n  async load_demo({ commit }) {\n    // A function to load some demo data (for screenshots and stuff)\n    commit('start_loading', {});\n\n    const window_events = [\n      {\n        duration: 32.1 * 60,\n        data: {\n          app: 'Firefox',\n          title: 'ActivityWatch/activitywatch: Track how you spend your time - Mozilla Firefox',\n          url: 'https://github.com/ActivityWatch/activitywatch',\n          $category: ['Work', 'Programming', 'ActivityWatch'],\n        },\n      },\n      {\n        duration: 14.6 * 60,\n        data: {\n          app: 'Firefox',\n          title: 'Inbox - Gmail - Mozilla Firefox',\n          url: 'https://mail.google.com',\n          $category: ['Comms', 'Email'],\n        },\n      },\n      {\n        duration: 0.2 * 60 * 60,\n        data: {\n          app: 'Firefox',\n          title: 'reddit: the front page of the internet - Mozilla Firefox',\n          url: 'https://reddit.com',\n          $category: ['Media', 'Social Media'],\n        },\n      },\n      {\n        duration: 0.2 * 60 * 60,\n        data: {\n          app: 'Firefox',\n          title: 'YouTube - Mozilla Firefox',\n          url: 'https://youtube.com',\n          $category: ['Media', 'Video'],\n        },\n      },\n      {\n        duration: 0.15 * 60 * 60,\n        data: {\n          app: 'Firefox',\n          title: 'Home / Twitter - Mozilla Firefox',\n          url: 'https://twitter.com',\n          $category: ['Media', 'Social Media'],\n        },\n      },\n      {\n        duration: 0.15 * 60 * 60,\n        data: {\n          app: 'Firefox',\n          title: 'Stack Overflow',\n          url: 'https://stackoverflow.com',\n          $category: ['Work', 'Programming'],\n        },\n      },\n      {\n        duration: 48.2 * 60,\n        data: {\n          app: 'Terminal',\n          title: 'vim ~/code/activitywatch/aw-server/aw-webui/src',\n          $category: ['Work', 'Programming', 'ActivityWatch'],\n        },\n      },\n      {\n        duration: 12.6 * 60,\n        data: {\n          app: 'Terminal',\n          title: 'bash ~/code/activitywatch',\n          $category: ['Work', 'Programming', 'ActivityWatch'],\n        },\n      },\n      {\n        duration: 58.1 * 60,\n        data: {\n          app: 'zoom',\n          title: 'Zoom Meeting',\n          $category: ['Comms', 'Video Conferencing'],\n        },\n      },\n      {\n        duration: 0.4 * 60 * 60,\n        data: { app: 'Minecraft', title: 'Minecraft', $category: ['Media', 'Games'] },\n      },\n      {\n        duration: 3.15 * 60,\n        data: { app: 'Spotify', title: 'Spotify', $category: ['Media', 'Music'] },\n      },\n    ];\n\n    function groupSumEventsBy(events, key, f) {\n      return flow(\n        filter(f),\n        groupBy(f),\n        values,\n        map((es: any) => {\n          return { duration: _.sumBy(es, 'duration'), data: { [key]: f(es[0]) } };\n        }),\n        sortBy('duration'),\n        reverse\n      )(events);\n    }\n\n    const app_events = groupSumEventsBy(window_events, 'app', (e: any) => e.data.app);\n    const title_events = groupSumEventsBy(window_events, 'title', (e: any) => e.data.title);\n    const cat_events = groupSumEventsBy(window_events, '$category', (e: any) => e.data.$category);\n    const url_events = groupSumEventsBy(window_events, 'url', (e: any) => e.data.url);\n    const domain_events = groupSumEventsBy(window_events, '$domain', (e: any) =>\n      e.data.url === undefined ? '' : new URL(e.data.url).host\n    );\n\n    commit('query_window_completed', {\n      duration: _.sumBy(window_events, 'duration'),\n      app_events,\n      title_events,\n      cat_events,\n      active_events: [\n        { timestamp: new Date().toISOString(), duration: 1.5 * 60 * 60, data: { afk: 'not-afk' } },\n      ],\n    });\n\n    commit('browser_buckets', ['aw-watcher-firefox']);\n    commit('query_browser_completed', {\n      duration: _.sumBy(url_events, 'duration'),\n      domains: domain_events,\n      urls: url_events,\n    });\n\n    commit('editor_buckets', ['aw-watcher-vim']);\n    commit('query_editor_completed', {\n      duration: 30,\n      files: [{ duration: 10, data: { file: 'test.py' } }],\n      languages: [{ duration: 10, data: { language: 'python' } }],\n      projects: [{ duration: 10, data: { project: 'aw-core' } }],\n    });\n\n    function build_active_history() {\n      const active_history = {};\n      let current_day = moment(get_day_start_with_offset());\n      _.map(_.range(0, 30), () => {\n        const current_day_end = moment(current_day).add(1, 'day');\n        active_history[`${current_day.format()}/${current_day_end.format()}`] = [\n          {\n            timestamp: current_day.format(),\n            duration: 100 + 900 * Math.random(),\n            data: { status: 'not-afk' },\n          },\n        ];\n        current_day = current_day.add(-1, 'day');\n      });\n      return active_history;\n    }\n    commit('query_active_history_completed', { active_history: build_active_history() });\n  },\n};\n\n// mutations\nconst mutations = {\n  start_loading(state, query_options: QueryOptions) {\n    state.loaded = true;\n    state.query_options = query_options;\n\n    // Resets the store state while waiting for new query to finish\n    state.window.top_apps = null;\n    state.window.top_titles = null;\n\n    state.browser.duration = 0;\n    state.browser.top_domains = null;\n    state.browser.top_urls = null;\n\n    state.editor.duration = 0;\n    state.editor.top_files = null;\n    state.editor.top_languages = null;\n    state.editor.top_projects = null;\n\n    state.category.top = null;\n\n    state.active.duration = null;\n\n    // Ensures that active history isn't being fully reloaded on every date change\n    // (see caching done in query_active_history and query_active_history_android)\n    // FIXME: Better detection of when to actually clear (such as on force reload, hostname change)\n    if (Object.keys(state.active.history).length === 0) {\n      state.active.history = {};\n    }\n  },\n\n  set_available(state, data) {\n    state.window.available = data['window_available'];\n    state.browser.available = data['browser_available'];\n    state.active.available = data['active_available'];\n    state.editor.available = data['editor_available'];\n    state.category.available = data['window_available'] || data['android_available'];\n    state.android.available = data['android_available'];\n  },\n\n  query_window_completed(state, data) {\n    state.window.top_apps = data['app_events'];\n    state.window.top_titles = data['title_events'];\n    state.category.top = data['cat_events'];\n    state.active.duration = data['duration'];\n    state.active.events = data['active_events'];\n  },\n\n  query_browser_completed(state, data) {\n    state.browser.top_domains = data.domains;\n    state.browser.top_urls = data.urls;\n    state.browser.duration = data.duration;\n\n    // FIXME: This one might take up a lot of size in the request, move it to a seperate request\n    // (or remove entirely, since we have the other timeline now)\n    state.web_chunks = data['chunks'];\n  },\n\n  query_editor_completed(state, data) {\n    state.editor.duration = data['duration'];\n    state.editor.top_files = data['files'];\n    state.editor.top_languages = data['languages'];\n    state.editor.top_projects = data['projects'];\n  },\n\n  query_active_history_completed(state, { active_history }) {\n    state.active.history = {\n      ...state.active.history,\n      ...active_history,\n    };\n  },\n\n  buckets(state, data) {\n    state.buckets = data;\n  },\n};\n\nexport default {\n  namespaced: true,\n  state: _state,\n  getters,\n  actions,\n  mutations,\n};\n","const _ = require('lodash');\n\n// initial state\nconst state = {\n  buckets: [],\n};\n\n// TODO: Remove the bucket['id'].includes(testing) check (only needed because I had an old bucket laying around)\nfunction get_buckets_by_type(buckets, type) {\n  return _.map(\n    _.filter(buckets, bucket => bucket['type'] === type && !bucket['id'].includes('testing')),\n    bucket => bucket['id']\n  );\n}\n\n// TODO: Remove the bucket['id'].includes(testing) check (only needed because I had an old bucket laying around)\nfunction get_buckets_by_host_and_type(buckets, host, type) {\n  return _.map(\n    _.filter(\n      buckets,\n      bucket =>\n        bucket['type'] === type && bucket['hostname'] == host && !bucket['id'].includes('testing')\n    ),\n    bucket => bucket['id']\n  );\n}\n\n// getters\nconst getters = {\n  afkBucketsByHost: state => host => {\n    return get_buckets_by_host_and_type(state.buckets, host, 'afkstatus');\n  },\n  windowBucketsByHost: state => host => {\n    return _.filter(\n      get_buckets_by_host_and_type(state.buckets, host, 'currentwindow'),\n      id => !id.startsWith('aw-watcher-android')\n    );\n  },\n  androidBucketsByHost: state => host => {\n    return _.filter(get_buckets_by_host_and_type(state.buckets, host, 'currentwindow'), id =>\n      id.startsWith('aw-watcher-android')\n    );\n  },\n  editorBuckets(state) {\n    return get_buckets_by_type(state.buckets, 'app.editor.activity');\n  },\n  browserBuckets(state) {\n    return get_buckets_by_type(state.buckets, 'web.tab.current');\n  },\n  getBucket: state => id => _.filter(state.buckets, b => b.id === id)[0],\n  bucketsByHostname: state => _.groupBy(state.buckets, 'hostname'),\n};\n\n// actions\nconst actions = {\n  async ensureBuckets({ state, dispatch }) {\n    if (state.buckets.length === 0) {\n      await dispatch('loadBuckets');\n    }\n  },\n\n  async loadBuckets({ commit }) {\n    const buckets = await this._vm.$aw.getBuckets();\n    commit('update_buckets', buckets);\n  },\n\n  async getBucketWithEvents({ getters, dispatch }, { id, start, end }) {\n    await dispatch('ensureBuckets');\n    const bucket = _.cloneDeep(getters.getBucket(id));\n    bucket.events = await this._vm.$aw.getEvents(bucket.id, {\n      start,\n      end,\n      limit: -1,\n    });\n    return bucket;\n  },\n\n  async getBucketsWithEvents({ state, dispatch }, { start, end }) {\n    await dispatch('ensureBuckets');\n    const buckets = await Promise.all(\n      _.map(\n        state.buckets,\n        async bucket => await dispatch('getBucketWithEvents', { id: bucket.id, start, end })\n      )\n    );\n    return _.orderBy(buckets, [b => b.id], ['asc']);\n  },\n\n  async deleteBucket({ dispatch }, { bucketId }) {\n    console.log(`Deleting bucket ${bucketId}`);\n    await this._vm.$aw.deleteBucket(bucketId);\n    await dispatch('loadBuckets');\n  },\n};\n\n// mutations\nconst mutations = {\n  update_buckets(state, buckets) {\n    state.buckets = buckets;\n  },\n};\n\nexport default {\n  namespaced: true,\n  state: state,\n  getters,\n  actions,\n  mutations,\n};\n","import * as _ from 'lodash';\nimport {\n  saveClasses,\n  loadClasses,\n  defaultCategories,\n  build_category_hierarchy,\n} from '~/util/classes';\n\n// initial state\nconst _state = {\n  classes: [],\n  classes_unsaved_changes: false,\n};\n\n// getters\nconst getters = {\n  classes_hierarchy: state => {\n    const hier = build_category_hierarchy(_.cloneDeep(state.classes));\n    return _.sortBy(hier, [c => c.id || 0]);\n  },\n  all_categories: state => {\n    return _.uniqBy(\n      _.flatten(\n        state.classes.map(c => {\n          const l = [];\n          for (let i = 1; i <= c.name.length; i++) {\n            l.push(c.name.slice(0, i));\n          }\n          return l;\n        })\n      ),\n      v => v.join('>>>>') // Can be any separator that doesn't appear in the category names themselves\n    );\n  },\n};\n\n// actions\nconst actions = {\n  async load({ commit }) {\n    commit('loadClasses', await loadClasses());\n  },\n  async save({ state, commit }) {\n    const r = await saveClasses(state.classes);\n    commit('saveCompleted');\n    return r;\n  },\n};\n\n// mutations\nconst mutations = {\n  loadClasses(state, classes) {\n    let i = 0;\n    state.classes = classes.map(c => Object.assign(c, { id: i++ }));\n    console.log('Loaded classes:', state.classes);\n    state.classes_unsaved_changes = false;\n  },\n  updateClass(state, new_class) {\n    console.log('Updating class:', new_class);\n\n    const old_class = _.cloneDeep(state.classes[new_class.id]);\n    if (new_class.id === undefined || new_class.id === null) {\n      new_class.id = _.max(_.map(state.classes, 'id')) + 1;\n      state.classes.push(new_class);\n    } else {\n      Object.assign(state.classes[new_class.id], new_class);\n    }\n\n    // When a parent category is renamed, we also need to rename the children\n    const parent_depth = old_class.name.length;\n    _.map(state.classes, c => {\n      if (_.isEqual(old_class.name, c.name.slice(0, parent_depth))) {\n        c.name = new_class.name.concat(c.name.slice(parent_depth));\n        console.log('Renamed child:', c.name);\n      }\n    });\n\n    state.classes_unsaved_changes = true;\n  },\n  addClass(state, new_class) {\n    new_class.id = _.max(_.map(state.classes, 'id')) + 1;\n    state.classes.push(new_class);\n    state.classes_unsaved_changes = true;\n  },\n  removeClass(state, cls) {\n    state.classes = state.classes.filter(c => c.id !== cls.id);\n    state.classes_unsaved_changes = true;\n  },\n  restoreDefaultClasses(state) {\n    let i = 0;\n    state.classes = defaultCategories.map(c => Object.assign(c, { id: i++ }));\n    state.classes_unsaved_changes = true;\n  },\n  saveCompleted(state) {\n    state.classes_unsaved_changes = false;\n  },\n};\n\nexport default {\n  namespaced: true,\n  state: _state,\n  getters,\n  actions,\n  mutations,\n};\n","const defaultViews = [\n  {\n    id: 'summary',\n    name: 'Summary',\n    elements: [\n      { type: 'top_apps', size: 3 },\n      { type: 'top_titles', size: 3 },\n      { type: 'top_domains', size: 3 },\n      { type: 'top_categories', size: 3 },\n      { type: 'category_tree', size: 3 },\n      { type: 'category_sunburst', size: 3 },\n    ],\n  },\n  {\n    id: 'window',\n    name: 'Window',\n    elements: [\n      { type: 'top_apps', size: 3 },\n      { type: 'top_titles', size: 3 },\n    ],\n  },\n  {\n    id: 'browser',\n    name: 'Browser',\n    elements: [\n      { type: 'top_domains', size: 3 },\n      { type: 'top_urls', size: 3 },\n    ],\n  },\n  {\n    id: 'editor',\n    name: 'Editor',\n    elements: [\n      { type: 'top_editor_files', size: 3 },\n      { type: 'top_editor_projects', size: 3 },\n      { type: 'top_editor_languages', size: 3 },\n    ],\n  },\n];\n\n// initial state\nconst _state = {\n  views: [],\n};\n\n// getters\nconst getters = {};\n\n// actions\nconst actions = {\n  async load({ commit }) {\n    commit('loadViews');\n  },\n  async save({ state, commit }) {\n    localStorage.views = JSON.stringify(state.views);\n    // After save, reload views\n    commit('loadViews');\n  },\n};\n\n// mutations\nconst mutations = {\n  loadViews(state) {\n    const views_json = localStorage.views;\n    if (views_json && views_json.length >= 1) {\n      state.views = JSON.parse(views_json);\n    } else {\n      state.views = defaultViews;\n    }\n    console.log('Loaded views:', state.views);\n  },\n  restoreDefaults(state) {\n    state.views = defaultViews;\n  },\n  addView(state, view) {\n    state.views.push({ ...view, elements: [] });\n  },\n  removeView(state, { view_id }) {\n    const idx = state.views.map(v => v.id).indexOf(view_id);\n    console.log(idx);\n    state.views.splice(idx, 1);\n  },\n  editView(state, { view_id, el_id, type }) {\n    console.log(view_id, el_id, type);\n    console.log(state.views);\n    state.views.find(v => v.id == view_id).elements[el_id].type = type;\n  },\n  addVisualization(state, { view_id, type }) {\n    state.views.find(v => v.id == view_id).elements.push({ type: type });\n  },\n  removeVisualization(state, { view_id, el_id }) {\n    state.views.find(v => v.id == view_id).elements.splice(el_id, 1);\n  },\n};\n\nexport default {\n  namespaced: true,\n  state: _state,\n  getters,\n  actions,\n  mutations,\n};\n","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport activity from './modules/activity';\nimport buckets from './modules/buckets';\nimport categories from './modules/categories';\nimport views from './modules/views';\n//import createLogger from '../../../src/plugins/logger';\n\nVue.use(Vuex);\n\nconst debug = process.env.NODE_ENV !== 'production';\n\nexport default new Vuex.Store({\n  modules: {\n    activity,\n    buckets,\n    categories,\n    views,\n  },\n  strict: debug,\n  //  plugins: debug ? [createLogger()] : [],\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"wrapper\"}},[_c('aw-header'),_c('div',{class:{'container': !_vm.fullContainer, 'container-fluid': _vm.fullContainer}},[_c('div',{staticClass:\"aw-container my-3 p-3\"},[_c('error-boundary',[_c('user-satisfaction-poll'),(_vm.isNewReleaseCheckEnabled)?_c('new-release-notification'):_vm._e(),_c('router-view')],1)],1)]),_c('div',{staticClass:\"container\",staticStyle:{\"color\":\"#555\"}},[_c('div',{staticStyle:{\"float\":\"left\"}},[_vm._m(0),_c('div',[_c('a',{staticClass:\"mr-2\",attrs:{\"href\":\"https://github.com/ActivityWatch/activitywatch\",\"target\":\"_blank\"}},[_c('icon',{attrs:{\"name\":\"brands/github\"}}),_vm._v(\"GitHub\")],1),_c('a',{attrs:{\"href\":\"https://twitter.com/ActivityWatchIt\",\"target\":\"_blank\"}},[_c('icon',{attrs:{\"name\":\"brands/twitter\"}}),_vm._v(\"Twitter\")],1)])]),_c('div',{staticStyle:{\"float\":\"right\",\"text-align\":\"right\"}},[_vm._v(\"Found a bug? \"),_c('a',{attrs:{\"href\":\"https://github.com/ActivityWatch/activitywatch/issues/new\"}},[_vm._v(\"File an issue\")]),_c('br'),_vm._v(\"Need help? \"),_c('a',{attrs:{\"href\":\"https://forum.activitywatch.net/c/support\"}},[_vm._v(\"Ask on the forum\")]),_c('br'),_vm._v(\"Missing a feature? \"),_c('a',{attrs:{\"href\":\"https://forum.activitywatch.net/c/features\"}},[_vm._v(\"Vote on the forum\")]),_c('br'),_vm._v(\"Built something cool? \"),_c('a',{attrs:{\"href\":\"https://forum.activitywatch.net/c/projects\"}},[_vm._v(\"Share it on the forum\")]),_c('br'),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.info),expression:\"info\"}],staticClass:\"mt-2\",staticStyle:{\"color\":\"#888\",\"font-size\":\"0.8em\"}},[_vm._v(\"Host: \"+_vm._s(_vm.info.hostname)),_c('br'),_vm._v(\"Version: \"+_vm._s(_vm.info.version))])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mb-1\"},[_vm._v(\"Made with ❤ by the \"),_c('a',{attrs:{\"href\":\"http://activitywatch.net/contributors/\"}},[_vm._v(\"ActivityWatch developers\")])])}]\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\ndiv#wrapper\n  aw-header\n\n  div(:class=\"{'container': !fullContainer, 'container-fluid': fullContainer}\")\n    div.aw-container.my-3.p-3\n      error-boundary\n        user-satisfaction-poll\n        new-release-notification(v-if=\"isNewReleaseCheckEnabled\")\n        router-view\n\n  div.container(style=\"color: #555\")\n    div(style=\"float: left\")\n      div.mb-1\n        | Made with ❤ by the #[a(href=\"http://activitywatch.net/contributors/\") ActivityWatch developers]\n      div\n        a.mr-2(href=\"https://github.com/ActivityWatch/activitywatch\", target=\"_blank\")\n          icon(name=\"brands/github\")\n          | GitHub\n        a(href=\"https://twitter.com/ActivityWatchIt\", target=\"_blank\")\n          icon(name=\"brands/twitter\")\n          | Twitter\n\n    div(style=\"float: right; text-align: right;\")\n      | Found a bug? #[a(href=\"https://github.com/ActivityWatch/activitywatch/issues/new\") File an issue]\n      br\n      | Need help? #[a(href=\"https://forum.activitywatch.net/c/support\") Ask on the forum]\n      br\n      | Missing a feature? #[a(href=\"https://forum.activitywatch.net/c/features\") Vote on the forum]\n      br\n      | Built something cool? #[a(href=\"https://forum.activitywatch.net/c/projects\") Share it on the forum]\n      br\n      span.mt-2(v-show=\"info\", style=\"color: #888; font-size: 0.8em\")\n        | Host: {{info.hostname}}\n        br\n        | Version: {{info.version}}\n</template>\n\n<script>\n// only import the icons you use to reduce bundle size\nimport 'vue-awesome/icons/brands/twitter';\nimport 'vue-awesome/icons/brands/github';\n\nexport default {\n  data: function () {\n    return {\n      activityViews: [],\n      info: {},\n      isNewReleaseCheckEnabled: !process.env.VUE_APP_ON_ANDROID,\n    };\n  },\n\n  computed: {\n    fullContainer() {\n      return this.$route.meta.fullContainer;\n    },\n  },\n\n  mounted: async function () {\n    this.$aw.getInfo().then(\n      info => {\n        this.info = info;\n      },\n      e => {\n        console.error('Unable to connect: ', e);\n        this.info = {};\n      }\n    );\n  },\n};\n</script>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--11-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--11-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=d8da3c40&lang=pug&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import '@babel/polyfill';\n\nimport Vue from 'vue';\n\n// Load the Bootstrap CSS\nimport BootstrapVue from 'bootstrap-vue';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'bootstrap-vue/dist/bootstrap-vue.css';\nVue.use(BootstrapVue);\n\nimport { Datetime } from 'vue-datetime';\nimport 'vue-datetime/dist/vue-datetime.css';\nVue.component('datetime', Datetime);\n\n// Setup default settings\nif (!('startOfDay' in localStorage)) {\n  localStorage.startOfDay = '04:00';\n}\n\n// Load the Varela Round font\nimport 'typeface-varela-round';\n\nimport './style/style.scss';\n\n// Loads all the filters\nimport './util/filters.js';\n\n// Create an instance of AWClient as this.$aw\nimport awclient from './util/awclient.js';\nVue.prototype.$aw = awclient;\n\n// Sets up the routing and the base app (using vue-router)\nimport router from './route.js';\n\n// Sets up the vuex store\nimport store from './store';\n\n// Register Font Awesome icon component\nVue.component('icon', () => import('vue-awesome/components/Icon'));\n\n// General components\nVue.component('error-boundary', () => import('./components/ErrorBoundary.vue'));\nVue.component('input-timeinterval', () => import('./components/InputTimeInterval.vue'));\nVue.component('aw-header', () => import('./components/Header.vue'));\nVue.component('aw-devonly', () => import('./components/DevOnly.vue'));\nVue.component('aw-selectable-vis', () => import('./components/SelectableVisualization.vue'));\nVue.component('new-release-notification', () => import('./components/NewReleaseNotification.vue'));\nVue.component('user-satisfaction-poll', () => import('./components/UserSatisfactionPoll.vue'));\n\n// Visualization components\nVue.component('aw-summary', () => import('./visualizations/Summary.vue'));\nVue.component('aw-periodusage', () => import('./visualizations/PeriodUsage.vue'));\nVue.component('aw-eventlist', () => import('./visualizations/EventList.vue'));\nVue.component('aw-sunburst-categories', () => import('./visualizations/SunburstCategories.vue'));\nVue.component('aw-sunburst-clock', () => import('./visualizations/SunburstClock.vue'));\nVue.component('aw-timeline-inspect', () => import('./visualizations/TimelineInspect.vue'));\nVue.component('aw-timeline', () => import('./visualizations/TimelineSimple.vue'));\nVue.component('vis-timeline', () => import('./visualizations/VisTimeline.vue'));\nVue.component('aw-categorytree', () => import('./visualizations/CategoryTree.vue'));\nVue.component('aw-timeline-barchart', () => import('./visualizations/TimelineBarChart.vue'));\nVue.component('aw-calendar', () => import('./visualizations/Calendar.vue'));\n\n// A mixin to make async method errors propagate\nVue.mixin(require('~/mixins/asyncErrorCaptured.js'));\n\n// Set the PRODUCTION constant\nVue.prototype.PRODUCTION = PRODUCTION;\n\n// Setup Vue app\nimport App from './App';\nnew Vue({\n  el: '#app',\n  router: router,\n  render: h => h(App),\n  store,\n});\n","import moment from 'moment';\n\nexport function seconds_to_duration(seconds) {\n  // Returns a human-readable duration string\n  const hrs = Math.floor(seconds / 60 / 60);\n  const min = Math.floor((seconds / 60) % 60);\n  const sec = Math.floor(seconds % 60);\n  const l = [];\n  if (hrs != 0) l.push(hrs + 'h');\n  if (min != 0) l.push(min + 'm');\n  if (sec != 0 || l.length == 0) l.push(sec + 's');\n  return l.join(' ');\n}\n\nexport function friendlydate(timestamp) {\n  const now = moment();\n  const m = moment.parseZone(timestamp);\n  const sinceNow = moment.duration(m.diff(now));\n  if (-sinceNow.asSeconds() <= 60) {\n    return `${Math.round(-sinceNow.asSeconds())}s ago`;\n  } else if (-sinceNow.asSeconds() <= 60 * 60 * 24) {\n    return sinceNow.humanize(true);\n  }\n  return sinceNow.humanize(true);\n}\n\nexport function get_day_start_with_offset(dateParam) {\n  const dateMoment = dateParam ? moment(dateParam) : moment().startOf('day');\n  const start_of_day = localStorage.startOfDay;\n  const start_of_day_hours = parseInt(start_of_day.split(':')[0]);\n  const start_of_day_minutes = parseInt(start_of_day.split(':')[1]);\n  return dateMoment.hour(start_of_day_hours).minute(start_of_day_minutes).format();\n}\n\nexport function get_day_end_with_offset(date) {\n  return moment(get_day_start_with_offset(date)).add(1, 'days').format();\n}\n\nexport function get_day_period(date) {\n  return get_day_start_with_offset(date) + '/' + get_day_end_with_offset(date);\n}\n\nexport function get_prev_day(datestr) {\n  return moment(datestr).add(-1, 'days');\n}\n\nexport function get_next_day(datestr) {\n  return moment(datestr).add(1, 'days');\n}\n\nexport function get_offset() {\n  const start_of_day = localStorage.startOfDay;\n  const [hours, minutes] = start_of_day.split(':');\n  return moment.duration({ hours, minutes });\n}\n\nexport function get_today() {\n  // Gets \"today\" in an offset-aware way\n  return moment().subtract(get_offset()).startOf('day').format('YYYY-MM-DD');\n}\n","// This mixin fixes following issue: errorHandler does not work with async component methods.\n// Fixing that issue is required for the ErrorBoundary component to work correctly.\n//\n// First I tried https://github.com/vuejs/vue/issues/7653\n// That didn't work, so I then tried: https://markeev.com/posts/vue-error-handling/\n// Which seems to work! (as long as you mark all functions as async and use await properly)\n\nfunction handleError(error, vm, info) {\n  let cur = vm;\n  while ((cur = cur.$parent)) {\n    const hooks = cur.$options.errorCaptured || [];\n    for (const hook of hooks) if (hook.call(cur, error, vm, info) === false) break;\n  }\n}\n\nexport default {\n  beforeCreate: function () {\n    const that = this;\n    const methods = this.$options.methods || {};\n    for (const key in methods) {\n      const original = methods[key];\n      methods[key] = function (...args) {\n        try {\n          const result = original.apply(this, args);\n          // let's analyse what is returned from the method\n          if (result && typeof result.then === 'function' && typeof result.catch === 'function') {\n            // this looks like a Promise. let's handle it's errors:\n            return result.catch(function (err) {\n              handleError(err, that, key);\n            });\n          } else return result;\n        } catch (e) {\n          handleError(e, that, key);\n        }\n      };\n    }\n  },\n};\n"],"sourceRoot":""}